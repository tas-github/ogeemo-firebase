"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4088],{78240:function(e,t,n){n.d(t,{e:function(){return y}});var r=n(57437),a=n(2265),s=n(39343),l=n(59772),i=n(31014),o=n(36473),c=n(31313),d=n(89733),u=n(54662),x=n(93363),j=n(77209),m=n(4919),h=n(2128),f=n(21413),p=n(69081),g=n(85915),v=n(72563),N=n(94729),w=n(86763),b=n(49354);let I=l.z.object({title:l.z.string().min(2,{message:"Title must be at least 2 characters."}),description:l.z.string().optional(),contactId:l.z.string().optional(),startDate:l.z.date({required_error:"A start date is required."}),startHour:l.z.string().optional(),startMinute:l.z.string().optional(),endDate:l.z.date({required_error:"An end date is required."}),endHour:l.z.string().optional(),endMinute:l.z.string().optional(),isProject:l.z.boolean().default(!1),clientId:l.z.string().optional(),ownerId:l.z.string().optional()});function y(e){let{isOpen:t,onOpenChange:n,onTaskCreate:l,onTaskUpdate:y,onProjectCreate:C,onProjectUpdate:D,eventToEdit:z,projectToEdit:k,projectId:P,contacts:S=[],initialMode:F="event",initialData:H={}}=e,{toast:J}=(0,w.pm)(),[M,W]=(0,a.useState)("project"===F||!!k),V=(0,s.cI)({resolver:(0,i.F)(I)});(0,a.useEffect)(()=>{if(t){let e="project"===F||!!k;W(e);let t={};if(k)t={isProject:!0,title:k.name,description:k.description||"",clientId:k.clientId||"",ownerId:k.ownerId||"",startDate:k.startDate||new Date,endDate:k.dueDate||new Date};else if(z)t={isProject:!1,title:z.title,description:z.description||"",contactId:z.contactId||"",startDate:z.start,startHour:String(z.start.getHours()),startMinute:String(z.start.getMinutes()),endDate:z.end,endHour:String(z.end.getHours()),endMinute:String(z.end.getMinutes())};else{let n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+1),a=sessionStorage.getItem("ogeemo-idea-to-project"),s=null;a&&(s=JSON.parse(a),sessionStorage.removeItem("ogeemo-idea-to-project")),t={isProject:e||!!s,title:(null==s?void 0:s.title)||"",description:(null==s?void 0:s.description)||"",contactId:"",startDate:n,startHour:String(n.getHours()),startMinute:"0",endDate:r,endHour:String(r.getHours()),endMinute:"0",...H}}V.reset(t)}},[t,z,k,F,H,V.reset]);let G=Array.from({length:24},(e,t)=>{let n=(0,o.t)(new Date,{hours:t});return{value:String(t),label:(0,c.WU)(n,"h a")}}),E=Array.from({length:12},(e,t)=>{let n=5*t;return{value:String(n),label:":".concat(n.toString().padStart(2,"0"))}});async function R(e){if(M){let t={name:e.title,description:e.description,clientId:e.clientId||null,ownerId:e.ownerId||null,assigneeIds:[],startDate:e.startDate,dueDate:e.endDate};k&&D?D({...k,...t}):C&&C(t,[])}else{let t=(0,o.t)(e.startDate,{hours:parseInt(e.startHour||"0"),minutes:parseInt(e.startMinute||"0")}),n=(0,o.t)(e.endDate,{hours:parseInt(e.endHour||"0"),minutes:parseInt(e.endMinute||"0")});if(n<=t){J({variant:"destructive",title:"Invalid Dates",description:"End date and time must be after the start date and time."});return}let r={title:e.title,description:e.description,start:t,end:n,contactId:e.contactId,status:(null==z?void 0:z.status)||"todo",position:(null==z?void 0:z.position)||0,projectId:P||(null==z?void 0:z.projectId)};z&&y?y({...z,...r}):l&&l(r)}n(!1)}let $=M?k?"Edit Project":"Create Project":z?"Edit Event":"Create Event";return(0,r.jsx)(u.Vq,{open:t,onOpenChange:n,children:(0,r.jsxs)(u.cZ,{children:[(0,r.jsxs)(u.fK,{children:[(0,r.jsx)(u.$N,{children:$}),(0,r.jsx)(u.Be,{children:M?"Define the details for your new project.":"Add a new event to your calendar."})]}),(0,r.jsx)(x.l0,{...V,children:(0,r.jsxs)("form",{onSubmit:V.handleSubmit(R),className:"space-y-4 pt-4",children:[(0,r.jsx)(x.Wi,{control:V.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:M?"Project Name":"Title"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(j.I,{...t})}),(0,r.jsx)(x.zG,{})]})}}),M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Wi,{control:V.control,name:"clientId",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Client"}),(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{children:(0,r.jsx)(h.ki,{placeholder:"Select a client"})})}),(0,r.jsx)(h.Bw,{children:S.map(e=>(0,r.jsx)(h.Ql,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:V.control,name:"ownerId",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Project Owner"}),(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{children:(0,r.jsx)(h.ki,{placeholder:"Select an owner"})})}),(0,r.jsx)(h.Bw,{children:S.map(e=>(0,r.jsx)(h.Ql,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(x.zG,{})]})}})]}):(0,r.jsx)(x.Wi,{control:V.control,name:"contactId",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Contact (Optional)"}),(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{children:(0,r.jsx)(h.ki,{placeholder:"Link a contact..."})})}),(0,r.jsx)(h.Bw,{children:S.map(e=>(0,r.jsx)(h.Ql,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.lX,{children:M?"Start Date":"Start"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x.Wi,{control:V.control,name:"startDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{className:"flex-1",children:[(0,r.jsxs)(f.J2,{children:[(0,r.jsx)(f.xo,{asChild:!0,children:(0,r.jsx)(x.NI,{children:(0,r.jsxs)(d.z,{variant:"outline",className:(0,b.cn)("w-full justify-start text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,c.WU)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(g.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(f.yk,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(p.f,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(x.zG,{})]})}}),!M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Wi,{control:V.control,name:"startHour",render:e=>{let{field:t}=e;return(0,r.jsx)(x.xJ,{children:(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{className:"w-[100px]",children:(0,r.jsx)(h.ki,{})})}),(0,r.jsx)(h.Bw,{children:G.map(e=>(0,r.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})})}}),(0,r.jsx)(x.Wi,{control:V.control,name:"startMinute",render:e=>{let{field:t}=e;return(0,r.jsx)(x.xJ,{children:(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{className:"w-[80px]",children:(0,r.jsx)(h.ki,{})})}),(0,r.jsx)(h.Bw,{children:E.map(e=>(0,r.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})})}})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.lX,{children:M?"Due Date":"End"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x.Wi,{control:V.control,name:"endDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{className:"flex-1",children:[(0,r.jsxs)(f.J2,{children:[(0,r.jsx)(f.xo,{asChild:!0,children:(0,r.jsx)(x.NI,{children:(0,r.jsxs)(d.z,{variant:"outline",className:(0,b.cn)("w-full justify-start text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,c.WU)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"}),(0,r.jsx)(g.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(f.yk,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(p.f,{mode:"single",selected:t.value,onSelect:t.onChange,initialFocus:!0})})]}),(0,r.jsx)(x.zG,{})]})}}),!M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Wi,{control:V.control,name:"endHour",render:e=>{let{field:t}=e;return(0,r.jsx)(x.xJ,{children:(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{className:"w-[100px]",children:(0,r.jsx)(h.ki,{})})}),(0,r.jsx)(h.Bw,{children:G.map(e=>(0,r.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})})}}),(0,r.jsx)(x.Wi,{control:V.control,name:"endMinute",render:e=>{let{field:t}=e;return(0,r.jsx)(x.xJ,{children:(0,r.jsxs)(h.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(x.NI,{children:(0,r.jsx)(h.i4,{className:"w-[80px]",children:(0,r.jsx)(h.ki,{})})}),(0,r.jsx)(h.Bw,{children:E.map(e=>(0,r.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})})}})]})]})]})]}),(0,r.jsx)(x.Wi,{control:V.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Description"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(m.g,{...t})}),(0,r.jsx)(x.zG,{})]})}}),!k&&(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsxs)(d.z,{type:"button",variant:"link",className:"p-0 h-auto",onClick:()=>W(e=>!e),children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),M?"Switch to simple event":"Promote to a project"]})}),(0,r.jsxs)(u.cN,{children:[(0,r.jsx)(d.z,{type:"button",variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,r.jsxs)(d.z,{type:"submit",children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4"})," ",z||k?"Save Changes":"Create"]})]})]})})]})})}},54662:function(e,t,n){n.d(t,{$N:function(){return f},Be:function(){return p},GG:function(){return u},Vq:function(){return o},cN:function(){return h},cZ:function(){return j},fK:function(){return m},hg:function(){return c}});var r=n(57437),a=n(2265),s=n(13304),l=n(74732),i=n(49354);let o=s.fC,c=s.xz,d=s.h_,u=s.x8,x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});x.displayName=s.aV.displayName;let j=a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(x,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[a,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=s.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5",t),...n})};m.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});f.displayName=s.Dx.displayName;let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});p.displayName=s.dk.displayName},93363:function(e,t,n){n.d(t,{NI:function(){return f},Wi:function(){return u},l0:function(){return c},lX:function(){return h},pf:function(){return p},xJ:function(){return m},zG:function(){return g}});var r=n(57437),a=n(2265),s=n(71538),l=n(39343),i=n(49354),o=n(70402);let c=l.RV,d=a.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(l.Qr,{...t})})},x=()=>{let e=a.useContext(d),t=a.useContext(j),{getFieldState:n,formState:r}=(0,l.Gc)(),s=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},j=a.createContext({}),m=a.forwardRef((e,t)=>{let{className:n,...s}=e,l=a.useId();return(0,r.jsx)(j.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...s})})});m.displayName="FormItem";let h=a.forwardRef((e,t)=>{let{className:n,...a}=e,{error:s,formItemId:l}=x();return(0,r.jsx)(o.Label,{ref:t,className:(0,i.cn)(s&&"text-destructive",n),htmlFor:l,...a})});h.displayName="FormLabel";let f=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,r.jsx)(s.g7,{ref:t,id:l,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...n})});f.displayName="FormControl";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e,{formDescriptionId:s}=x();return(0,r.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});p.displayName="FormDescription";let g=a.forwardRef((e,t)=>{var n;let{className:a,children:s,...l}=e,{error:o,formMessageId:c}=x(),d=o?String(null!==(n=null==o?void 0:o.message)&&void 0!==n?n:""):s;return d?(0,r.jsx)("p",{ref:t,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",a),...l,children:d}):null});g.displayName="FormMessage"},56147:function(e,t,n){n.d(t,{K2:function(){return c},Tb:function(){return i},Tk:function(){return u},_f:function(){return a},oN:function(){return l},s6:function(){return o},uK:function(){return d},xh:function(){return s}}),n(74590);var r=n(58064),a=(0,r.$)("73bd2ff36e5bd9c053e885c0da2fc4042b460c21"),s=(0,r.$)("d42b1f4c9a1b03939eac4ec4e129c1f6cee3693e"),l=(0,r.$)("155b73ae85051413d441b803e36c5266ebf53a83"),i=(0,r.$)("acffb53a6d7027804320983fc8c67d170e26cde2"),o=(0,r.$)("deec4d57c045361779aefb567fa996b8b9c29cb2"),c=(0,r.$)("37e64c7965fbbd38fea09c0d1e41d9ef24995e9d"),d=(0,r.$)("3f24dd26eea711a88bb48a6c1acef6fc1e5f40f0"),u=(0,r.$)("f0750ca6dad6c7e3f4dc90da7aebe5e12371ceec")}}]);