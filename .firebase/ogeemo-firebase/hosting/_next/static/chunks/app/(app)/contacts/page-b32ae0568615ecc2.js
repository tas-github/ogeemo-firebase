(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4759],{35493:function(e,t,n){Promise.resolve().then(n.bind(n,10912)),Promise.resolve().then(n.bind(n,61481)),Promise.resolve().then(n.bind(n,45974)),Promise.resolve().then(n.bind(n,44541)),Promise.resolve().then(n.bind(n,56634))},57818:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var l=n(50551),a=n.n(l)},50551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let l=n(99920);n(57437),n(2265);let a=l._(n(40148));function s(e,t){var n;let l={loading:e=>{let{error:t,isLoading:n,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e);let s={...l,...t};return(0,a.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let l=n(55592);function a(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return n}},40148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let l=n(57437),a=n(2265),s=n(10912),i=n(61481);function r(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(r(()=>null)),loading:null,ssr:!0},c=function(e){let t={...d,...e},n=(0,a.lazy)(()=>t.loader().then(r)),c=t.loading;function o(e){let r=c?(0,l.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,d=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,l.jsx)(n,{...e})]}):(0,l.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(n,{...e})});return(0,l.jsx)(a.Suspense,{fallback:r,children:d})}return o.displayName="LoadableComponent",o}},61481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let l=n(57437),a=n(58512);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,a.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,l.jsx)(l.Fragment,{children:s.map(e=>(0,l.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},45974:function(e,t,n){"use strict";n.r(t),n.d(t,{ContactsView:function(){return E}});var l=n(57437),a=n(2265),s=n(57818),i=n(16463),r=n(94546),d=n(32515),c=n(38087),o=n(51601),u=n(55702),h=n(91241),f=n(71530),m=n(8527),x=n(19847),p=n(1035),j=n(62373),v=n(69893),g=n(89733),y=n(56634),b=n(47304),N=n(31590),C=n(54662),w=n(77209),k=n(70402),S=n(44541),I=n(80023),P=n(86763),F=n(56147),D=n(19779);n(74590);var O=n(58064),z=(0,O.$)("7d7e3b8bf1d3a0d342413e1d1f1dffcad8f28552");(0,O.$)("eff734e06e03e9667deb8d1cfa32067d91718ee3"),(0,O.$)("b148b1492c1bd0c207b9248a0a26652fefd7fee5");var M=n(49354);let R=(0,s.default)(()=>Promise.all([n.e(1374),n.e(3823)]).then(n.bind(n,63823)),{loadableGenerated:{webpack:()=>[63823]},loading:()=>(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,l.jsx)(c.Z,{className:"h-10 w-10 animate-spin text-white"})})}),Z=(0,s.default)(()=>n.e(7085).then(n.bind(n,57085)),{loadableGenerated:{webpack:()=>[57085]},loading:()=>(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,l.jsx)(c.Z,{className:"h-10 w-10 animate-spin text-white"})})});function _(){return(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"h-4 w-4 mr-2",children:[(0,l.jsx)("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),(0,l.jsx)("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"}),(0,l.jsx)("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.222 0-9.618-3.229-11.303-7.582l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),(0,l.jsx)("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-.792 2.447-2.274 4.481-4.244 5.892l6.19 5.238C42.012 35.245 44 30.028 44 24c0-1.341-.138-2.65-.389-3.917z"})]})}let T={CONTACT:"contact",FOLDER:"folder"};function E(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)([]),[O,E]=(0,a.useState)(!0),[A,G]=(0,a.useState)("all"),[$,L]=(0,a.useState)([]),[K,V]=(0,a.useState)(!1),[q,B]=(0,a.useState)(null),[H,X]=(0,a.useState)(null),[U,W]=(0,a.useState)(""),[Y,J]=(0,a.useState)(!1),[Q,ee]=(0,a.useState)(null),[et,en]=(0,a.useState)(!1),[el,ea]=(0,a.useState)(!1),[es,ei]=(0,a.useState)(!1),[er,ed]=(0,a.useState)([]),[ec,eo]=(0,a.useState)([]),[eu,eh]=(0,a.useState)(null),[ef,em]=(0,a.useState)(new Set),[ex,ep]=(0,a.useState)(!0),[ej,ev]=(0,a.useState)(!1),{toast:eg}=(0,P.pm)(),{user:ey,accessToken:eb}=(0,D.a)(),eN=(0,i.useRouter)(),[{canDropToRoot:eC,isOverRoot:ew},ek]=(0,r.L)(()=>({accept:T.FOLDER,drop:e=>e$(e,null),collect:e=>({isOverRoot:e.isOver(),canDropToRoot:e.canDrop()})}));(0,a.useEffect)(()=>{try{"true"===localStorage.getItem("hideGoogleImportInstructions")&&ep(!1)}catch(e){console.error("Could not read from localStorage",e)}},[]),(0,a.useEffect)(()=>{(async function(){if(!ey){E(!1);return}E(!0);try{let[e,n]=await Promise.all([(0,F.xh)(ey.uid),(0,F.K2)(ey.uid)]);t(e),s(n);let l=e.find(e=>!e.parentId);l&&em(new Set([l.id]))}catch(e){console.error("Failed to load contact data:",e),eg({variant:"destructive",title:"Failed to load data",description:e.message||"Could not retrieve contacts and folders from the database."})}finally{E(!1)}})()},[eg,ey]);let eS=(0,a.useMemo)(()=>e.find(e=>e&&e.id===A),[e,A]),eI=(0,a.useMemo)(()=>{if("all"===A)return n;let t=n=>{let l=[n];return e.filter(e=>e.parentId===n).forEach(e=>{l=[...l,...t(e.id)]}),l},l=t(A);return n.filter(e=>l.includes(e.folderId))},[n,e,A]),eP=eI.length>0&&$.length===eI.length,eF=$.length>0&&$.length<eI.length;if(O)return(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,l.jsx)(c.Z,{className:"h-10 w-10 animate-spin text-primary"})});let eD=e=>{L(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eO=async(e,t)=>{if(ey)try{if(t)await (0,F.Tk)(e.id,e),s(t=>t.map(t=>t.id===e.id?e:t)),eg({title:"Contact Updated",description:"Details for ".concat(e.name," have been saved.")});else{let t={...e,userId:ey.uid},n=await (0,F.uK)(t);s(e=>[...e,n]),eg({title:"Contact Created",description:"".concat(n.name," has been added.")})}}catch(e){eg({variant:"destructive",title:"Save failed",description:e.message})}},ez=async()=>{if(ey&&0!==$.length)try{await (0,F._f)($),s(n.filter(e=>!$.includes(e.id))),eg({title:"".concat($.length," Contacts Deleted")}),L([])}catch(e){eg({variant:"destructive",title:"Delete Failed",description:e.message})}},eM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(e.parentId||null),V(!0)},eR=async()=>{if(ey&&eu)try{await (0,F.s6)(ey.uid,eu.id);let[e,n]=await Promise.all([(0,F.xh)(ey.uid),(0,F.K2)(ey.uid)]);t(e),s(n),A===eu.id&&G("all"),eg({title:"Folder Deleted"})}catch(e){eg({variant:"destructive",title:"Delete Failed",description:e.message})}finally{eh(null)}},eZ=e=>{X(e),W(e.name)},e_=()=>{X(null),W("")},eT=async()=>{if(!H||!U.trim()||H.name===U.trim()){e_();return}try{await (0,F.Tb)(H.id,{name:U.trim()}),t(e=>e.map(e=>e.id===H.id?{...e,name:U.trim()}:e)),eg({title:"Folder Renamed"})}catch(e){eg({variant:"destructive",title:"Rename Failed",description:e.message})}finally{e_()}},eE=async()=>{if(!eb){en(!0);return}ea(!0),ei(!0),ed([]),eo([]);try{let e=await z(eb);ed(e.contacts)}catch(e){eg({variant:"destructive",title:"Failed to fetch Google Contacts",description:e.message}),ea(!1)}finally{ei(!1)}},eA=async()=>{if(!ey)return;let n=e.find(e=>"Google Contacts"===e.name);n||(n=await (0,F.oN)({name:"Google Contacts",userId:ey.uid,parentId:null}),t(e=>[...e,n]));let l=er.filter(e=>ec.includes(e.resourceName)),a=0,i=[];for(let e of l){var r,d,c,o,u,h,f,m,x,p,j,v;try{let t={name:(null===(d=e.names)||void 0===d?void 0:null===(r=d[0])||void 0===r?void 0:r.displayName)||"Unknown Name",email:(null===(o=e.emailAddresses)||void 0===o?void 0:null===(c=o[0])||void 0===c?void 0:c.value)||"",businessPhone:null===(h=e.phoneNumbers)||void 0===h?void 0:null===(u=h.find(e=>"work"===e.type))||void 0===u?void 0:u.value,cellPhone:null===(m=e.phoneNumbers)||void 0===m?void 0:null===(f=m.find(e=>"mobile"===e.type))||void 0===f?void 0:f.value,homePhone:null===(p=e.phoneNumbers)||void 0===p?void 0:null===(x=p.find(e=>"home"===e.type))||void 0===x?void 0:x.value,folderId:n.id,userId:ey.uid,notes:"Imported from Google Contacts on ".concat(new Date().toLocaleDateString())},l=await (0,F.uK)(t);i.push(l),a++}catch(t){console.error("Failed to import contact",null===(v=e.names)||void 0===v?void 0:null===(j=v[0])||void 0===j?void 0:j.displayName,t)}}s(e=>[...e,...i]),eg({title:"Import Complete",description:"Imported ".concat(a," contacts.")}),ea(!1)},eG=async(t,n)=>{if(t.folderId!==n)try{await (0,F.Tk)(t.id,{folderId:n}),s(e=>e.map(e=>e.id===t.id?{...e,folderId:n}:e));let l=e.find(e=>e.id===n);eg({title:"Contact Moved",description:'"'.concat(t.name,'" moved to "').concat(null==l?void 0:l.name,'".')})}catch(e){eg({variant:"destructive",title:"Move Failed",description:e.message})}},e$=async(n,l)=>{if(n.id===l||n.parentId===l)return;let a=l;for(;a;){if(a===n.id){eg({variant:"destructive",title:"Invalid Move",description:"You cannot move a folder into one of its own subfolders."});return}let t=e.find(e=>e.id===a);a=(null==t?void 0:t.parentId)||null}try{await (0,F.Tb)(n.id,{parentId:l}),t(e=>e.map(e=>e.id===n.id?{...e,parentId:l}:e));let a=e.find(e=>e.id===l);eg({title:"Folder Moved",description:'"'.concat(n.name,'" moved to "').concat((null==a?void 0:a.name)||"Root",'".')})}catch(e){eg({variant:"destructive",title:"Move Failed",description:e.message})}},eL=e=>{let{contact:t,children:n}=e,[{isDragging:a},s]=(0,d.c)(()=>({type:T.CONTACT,item:t,collect:e=>({isDragging:e.isDragging()})}));return(0,l.jsx)(b.SC,{ref:s,className:(0,M.cn)(a&&"opacity-50"),children:n})},eK=t=>{let{parentId:n=null,level:a=0}=t,s=e.filter(e=>e.parentId===n).sort((e,t)=>e.name.localeCompare(t.name));return 0===s.length&&0===a&&null===n?(0,l.jsx)("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"No folders yet. Create one to get started."}):0===s.length?null:(0,l.jsx)("div",{style:{marginLeft:a>0?"1rem":"0"},children:s.map(t=>{let n=e.some(e=>e.parentId===t.id),s=ef.has(t.id),i=(null==H?void 0:H.id)===t.id,[{isDragging:c},p,j]=(0,d.c)(()=>({type:T.FOLDER,item:{...t,type:T.FOLDER},collect:e=>({isDragging:e.isDragging()})})),[{canDrop:v,isOver:y},b]=(0,r.L)(()=>({accept:[T.CONTACT,T.FOLDER],drop:e=>{e.type===T.FOLDER?e$(e,t.id):eG(e,t.id)},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}));return(0,l.jsxs)("div",{className:"my-1 rounded-md",ref:j,children:[(0,l.jsxs)("div",{ref:e=>p(b(e)),className:(0,M.cn)("flex items-center gap-1 rounded-md pr-1 group",i?"bg-background":"hover:bg-accent",y&&v&&"bg-primary/20 ring-1 ring-primary",c&&"opacity-50"),style:{backgroundColor:A!==t.id||i?"transparent":"hsl(var(--accent))"},children:[(0,l.jsxs)(g.z,{variant:"ghost",className:"flex-1 justify-start gap-2 h-9 p-2 text-left",onClick:()=>{i||G(t.id)},children:[n?(0,l.jsx)(o.Z,{className:(0,M.cn)("h-4 w-4 shrink-0 transition-transform",s&&"rotate-90"),onClick:e=>{e.stopPropagation(),em(e=>{let n=new Set(e);return n.has(t.id)?n.delete(t.id):n.add(t.id),n})}}):(0,l.jsx)("div",{className:"w-4 h-4"}),(0,l.jsx)(u.Z,{className:(0,M.cn)("h-4 w-4",t.parentId?"text-green-500":"text-blue-500")}),i?(0,l.jsx)(w.I,{autoFocus:!0,value:U,onChange:e=>W(e.target.value),onBlur:eT,onKeyDown:e=>{"Enter"===e.key&&eT(),"Escape"===e.key&&e_()},className:"h-7",onClick:e=>e.stopPropagation()}):(0,l.jsx)("span",{className:"truncate flex-1",children:t.name})]}),!i&&(0,l.jsxs)(N.h_,{children:[(0,l.jsx)(N.$F,{asChild:!0,children:(0,l.jsx)(g.z,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:(0,l.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,l.jsxs)(N.AW,{align:"end",children:[(0,l.jsxs)(N.Xi,{onSelect:()=>eM({parentId:t.id}),children:[(0,l.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Create subfolder"]}),(0,l.jsxs)(N.Xi,{onSelect:()=>eZ(t),children:[(0,l.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Rename"]}),(0,l.jsx)(N.VD,{}),(0,l.jsxs)(N.Xi,{className:"text-destructive",onSelect:()=>eh(t),children:[(0,l.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),s&&(0,l.jsx)(eK,{parentId:t.id,level:a+1})]},t.id)})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsxs)("header",{className:"text-center py-4 sm:py-6 px-4 sm:px-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Ogeemo Contact Manager"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage your contacts and client relationships"})]}),(0,l.jsx)("div",{className:"flex-1 min-h-0 pb-4 sm:pb-6",children:(0,l.jsxs)(y.ResizablePanelGroup,{direction:"horizontal",className:"h-full rounded-lg border",children:[(0,l.jsx)(y.ResizablePanel,{defaultSize:25,minSize:20,children:(0,l.jsxs)("div",{className:"flex h-full flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 border-b h-[57px]",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold px-2",children:"Folders"}),(0,l.jsxs)(g.z,{variant:"ghost",size:"icon",onClick:()=>eM({parentId:null}),title:"New Root Folder",children:[(0,l.jsx)(f.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"New Root Folder"})]})]}),(0,l.jsxs)(I.ScrollArea,{ref:ek,className:(0,M.cn)("flex-1 rounded-md p-2",ew&&eC&&"bg-primary/10 ring-1 ring-primary-foreground"),children:[(0,l.jsxs)(g.z,{variant:"all"===A?"secondary":"ghost",className:"w-full justify-start gap-3 my-1",onClick:()=>G("all"),children:[(0,l.jsx)(p.Z,{className:"h-4 w-4"})," ",(0,l.jsx)("span",{children:"All Contacts"})]}),(0,l.jsx)(eK,{})]})]})}),(0,l.jsx)(y.ResizableHandle,{withHandle:!0}),(0,l.jsx)(y.ResizablePanel,{defaultSize:75,children:(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsx)("div",{className:"flex items-center justify-between p-4 border-b h-20",children:$.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h2",{className:"text-xl font-bold",children:[$.length," selected"]}),(0,l.jsxs)(g.z,{variant:"destructive",onClick:ez,children:[(0,l.jsx)(x.Z,{className:"mr-2 h-4 w-4"})," Delete Selected"]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold",children:"all"===A?"All Contacts":null==eS?void 0:eS.name}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[eI.length," contact(s)"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(g.z,{variant:"outline",onClick:()=>{ex?ev(!0):eE()},disabled:!ey,children:[(0,l.jsx)(_,{})," Import from Google"]}),(0,l.jsxs)(g.z,{onClick:()=>{if("all"===A){eg({variant:"destructive",title:"Folder Required",description:"Please select a specific folder before adding a new contact."});return}ee(null),J(!0)},className:"bg-orange-500 hover:bg-orange-600 text-white",children:[(0,l.jsx)(j.Z,{className:"mr-2 h-4 w-4"})," Add Contact"]})]})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsxs)(b.iA,{children:[(0,l.jsx)(b.xD,{children:(0,l.jsxs)(b.SC,{children:[(0,l.jsx)(b.ss,{className:"w-[50px]",children:(0,l.jsx)(S.Checkbox,{checked:!!eP||!!eF&&"indeterminate",onCheckedChange:()=>{L(eP?[]:eI.map(e=>e.id))}})}),(0,l.jsx)(b.ss,{children:"Name"}),(0,l.jsx)(b.ss,{children:"Email"}),(0,l.jsx)(b.ss,{children:"Phone"}),"all"===A&&(0,l.jsx)(b.ss,{children:"Folder"}),(0,l.jsx)(b.ss,{className:"w-[50px]",children:(0,l.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,l.jsx)(b.RM,{children:eI.map(t=>{var n;let a=(null===(n=e.find(e=>e.id===t.folderId))||void 0===n?void 0:n.name)||"Unassigned",i=t.primaryPhoneType&&t[t.primaryPhoneType]?t[t.primaryPhoneType]:t.cellPhone||t.businessPhone||t.homePhone;return(0,l.jsxs)(eL,{contact:t,children:[(0,l.jsx)(b.pj,{onClick:e=>e.stopPropagation(),children:(0,l.jsx)(S.Checkbox,{checked:$.includes(t.id),onCheckedChange:()=>eD(t.id)})}),(0,l.jsx)(b.pj,{className:"font-medium cursor-pointer hover:underline",onClick:()=>{ee(t),J(!0)},children:t.name}),(0,l.jsx)(b.pj,{children:t.email}),(0,l.jsx)(b.pj,{children:i}),"all"===A&&(0,l.jsx)(b.pj,{children:a}),(0,l.jsx)(b.pj,{onClick:e=>e.stopPropagation(),children:(0,l.jsxs)(N.h_,{children:[(0,l.jsx)(N.$F,{asChild:!0,children:(0,l.jsx)(g.z,{variant:"ghost",size:"icon",children:(0,l.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,l.jsxs)(N.AW,{align:"end",children:[(0,l.jsxs)(N.Xi,{onSelect:()=>{ee(t),J(!0)},children:[(0,l.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Open"]}),(0,l.jsxs)(N.Xi,{onSelect:()=>{ee(t),J(!0)},children:[(0,l.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,l.jsx)(N.VD,{}),(0,l.jsxs)(N.Xi,{className:"text-destructive",onSelect:async()=>{await (0,F._f)([t.id]),s(e=>e.filter(e=>e.id!==t.id)),eg({title:"Contact Deleted"})},children:[" ",(0,l.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},t.id)})})]})})]})})]})})]}),Y&&(0,l.jsx)(R,{isOpen:Y,onOpenChange:J,contactToEdit:Q,selectedFolderId:A,folders:e,onSave:eO}),(0,l.jsx)(C.Vq,{open:K,onOpenChange:V,children:(0,l.jsxs)(C.cZ,{className:"sm:max-w-md",children:[(0,l.jsx)(C.fK,{children:(0,l.jsx)(C.$N,{children:"Create New Folder"})}),(0,l.jsxs)("div",{className:"py-4",children:[(0,l.jsx)(k.Label,{htmlFor:"folder-name-new",children:"Name"}),(0,l.jsx)(w.I,{id:"folder-name-new",value:U,onChange:e=>W(e.target.value),onKeyDown:async e=>{if("Enter"===e.key){if(!ey||!U.trim())return;let e=await (0,F.oN)({name:U,userId:ey.uid,parentId:q});t(t=>[...t,e]),e.parentId&&em(t=>new Set(t).add(e.parentId)),V(!1),W("")}}})]}),(0,l.jsxs)(C.cN,{children:[(0,l.jsx)(g.z,{variant:"ghost",onClick:()=>V(!1),children:"Cancel"}),(0,l.jsx)(g.z,{onClick:async()=>{if(!ey||!U.trim())return;let e=await (0,F.oN)({name:U,userId:ey.uid,parentId:q});t(t=>[...t,e]),e.parentId&&em(t=>new Set(t).add(e.parentId)),V(!1),W("")},children:"Create"})]})]})}),(0,l.jsx)(C.Vq,{open:et,onOpenChange:en,children:(0,l.jsxs)(C.cZ,{children:[(0,l.jsxs)(C.fK,{children:[(0,l.jsx)(C.$N,{children:"Authentication Required"}),(0,l.jsx)(C.Be,{children:"To import contacts, you need to connect your Google account and grant permission. Please go to the Google Integration page to sign in."})]}),(0,l.jsx)(C.cN,{children:(0,l.jsx)(g.z,{onClick:()=>{en(!1),eN.push("/google")},children:"Go to Google Integration"})})]})}),(0,l.jsx)(C.Vq,{open:null!==eu,onOpenChange:()=>eh(null),children:(0,l.jsxs)(C.cZ,{children:[(0,l.jsxs)(C.fK,{children:[(0,l.jsx)(C.$N,{children:"Delete Folder"}),(0,l.jsxs)(C.Be,{children:['Are you sure you want to delete the "',null==eu?void 0:eu.name,'" folder and all contacts within it? This action cannot be undone.']})]}),(0,l.jsxs)(C.cN,{children:[(0,l.jsx)(g.z,{variant:"ghost",onClick:()=>eh(null),children:"Cancel"}),(0,l.jsx)(g.z,{variant:"destructive",onClick:eR,children:"Delete"})]})]})}),(0,l.jsx)(C.Vq,{open:el,onOpenChange:ea,children:(0,l.jsxs)(C.cZ,{className:"sm:max-w-lg h-[80vh] flex flex-col",children:[(0,l.jsxs)(C.fK,{children:[(0,l.jsx)(C.$N,{children:"Import Google Contacts"}),(0,l.jsx)(C.Be,{children:'Select contacts to import into a "Google Contacts" folder.'})]}),es?(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsx)(c.Z,{className:"h-8 w-8 animate-spin"})}):(0,l.jsx)(I.ScrollArea,{className:"flex-1 -mx-6 my-4 border-y",children:(0,l.jsx)("div",{className:"p-4 space-y-1",children:er.map(e=>{var t,n,a,s;return(0,l.jsxs)("div",{className:"flex items-center p-2 rounded-md hover:bg-accent space-x-3",children:[(0,l.jsx)(S.Checkbox,{id:e.resourceName,checked:ec.includes(e.resourceName),onCheckedChange:()=>eo(t=>t.includes(e.resourceName)?t.filter(t=>t!==e.resourceName):[...t,e.resourceName])}),(0,l.jsxs)(k.Label,{htmlFor:e.resourceName,className:"flex-1 cursor-pointer",children:[(0,l.jsx)("p",{className:"font-semibold",children:(null===(n=e.names)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.displayName)||"N/A"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:(null===(s=e.emailAddresses)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.value)||"No email"})]})]},e.resourceName)})})}),(0,l.jsxs)(C.cN,{children:[(0,l.jsx)(g.z,{variant:"ghost",onClick:()=>ea(!1),children:"Cancel"}),(0,l.jsxs)(g.z,{onClick:eA,disabled:es||0===ec.length,children:["Import (",ec.length,")"]})]})]})}),ej&&(0,l.jsx)(Z,{isOpen:ej,onOpenChange:ev,onProceed:e=>{if(e)try{localStorage.setItem("hideGoogleImportInstructions","true"),ep(!1)}catch(e){console.error("Could not write to localStorage",e)}ev(!1),eE()}})]})}},56147:function(e,t,n){"use strict";n.d(t,{K2:function(){return c},Tb:function(){return r},Tk:function(){return u},_f:function(){return a},oN:function(){return i},s6:function(){return d},uK:function(){return o},xh:function(){return s}}),n(74590);var l=n(58064),a=(0,l.$)("73bd2ff36e5bd9c053e885c0da2fc4042b460c21"),s=(0,l.$)("d42b1f4c9a1b03939eac4ec4e129c1f6cee3693e"),i=(0,l.$)("155b73ae85051413d441b803e36c5266ebf53a83"),r=(0,l.$)("acffb53a6d7027804320983fc8c67d170e26cde2"),d=(0,l.$)("deec4d57c045361779aefb567fa996b8b9c29cb2"),c=(0,l.$)("37e64c7965fbbd38fea09c0d1e41d9ef24995e9d"),o=(0,l.$)("3f24dd26eea711a88bb48a6c1acef6fc1e5f40f0"),u=(0,l.$)("f0750ca6dad6c7e3f4dc90da7aebe5e12371ceec")},62373:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(6497).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1035:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(6497).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[4358,4728,2641,7255,4086,5510,9279,3070,6680,23,2385,3796,7001,4677,2971,7023,1744],function(){return e(e.s=35493)}),_N_E=e.O()}]);