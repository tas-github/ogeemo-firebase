(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9271],{36215:function(e,t,r){Promise.resolve().then(r.bind(r,54295))},54295:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(57437),s=r(2265),a=r(16463),i=r(89733),o=r(48185),l=r(47304),c=r(29021),d=r(29973),u=r(38087),f=r(98604),m=r(86644),x=r(18422),h=r(73344),p=r(80624),b=r(31313),g=r(86763),j=r(4919),v=r(15410);let N=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"});function y(){let[e,t]=(0,s.useState)(null),[r,y]=(0,s.useState)(!0),[w,T]=(0,s.useState)(null),[S,R]=(0,s.useState)(""),{toast:A}=(0,g.pm)(),D=(0,a.useRouter)(),{handlePrint:C,contentRef:k}=(0,v.Y)();if((0,s.useEffect)(()=>{try{let e=sessionStorage.getItem("ogeemo-receipt-data");if(e){let r=JSON.parse(e),n={...r.invoice,dueDate:(0,p.D)(r.invoice.dueDate),invoiceDate:(0,p.D)(r.invoice.invoiceDate),createdAt:(0,p.D)(r.invoice.createdAt)};t({...r,invoice:n})}else T("No receipt data found. Please return to the previous page and try again.")}catch(e){console.error("Failed to load receipt data:",e),T(e instanceof Error?e.message:"Could not load receipt data due to an internal error.")}finally{y(!1)}},[]),r)return(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,n.jsx)(u.Z,{className:"h-8 w-8 animate-spin"})});if(w||!e)return(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,n.jsx)(o.Zb,{className:"w-full max-w-md text-center",children:(0,n.jsxs)(o.aY,{className:"p-6",children:[(0,n.jsx)(f.Z,{className:"mx-auto h-12 w-12 text-destructive"}),(0,n.jsx)("h2",{className:"mt-4 text-xl font-semibold",children:"Could not load receipt"}),(0,n.jsx)("p",{className:"mt-2 text-muted-foreground",children:w||"An unknown error occurred."}),(0,n.jsxs)(i.z,{className:"mt-6",onClick:()=>D.push("/accounting/invoices/payments"),children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Return to Accounts Receivable"]})]})})});let{invoice:O,carryForwardAmount:E}=e,_=O.originalAmount-O.amountPaid+E;return(0,n.jsxs)("div",{className:"p-4 sm:p-6 space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center max-w-4xl mx-auto",children:[(0,n.jsxs)(i.z,{variant:"outline",onClick:()=>D.push("/accounting/invoices/payments"),children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Back to Accounts Receivable"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(i.z,{variant:"outline",onClick:C,children:[(0,n.jsx)(x.Z,{className:"mr-2 h-4 w-4"})," Print Receipt"]}),(0,n.jsxs)(i.z,{onClick:()=>{e&&A({title:"Email Sent (Simulation)",description:"The receipt for invoice ".concat(e.invoice.invoiceNumber," has been sent to ").concat(e.invoice.clientName,".")})},children:[(0,n.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Email Receipt"]})]})]}),(0,n.jsx)(o.Zb,{id:"invoice-preview",ref:k,className:"max-w-4xl mx-auto",children:(0,n.jsxs)(o.aY,{className:"p-8 relative",children:[_<=.001&&(0,n.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-15deg)",fontSize:"8rem",fontWeight:"bold",color:"rgba(0, 128, 0, 0.10)",border:"15px solid rgba(0, 128, 0, 0.10)",padding:"1rem 2rem",borderRadius:"10px",zIndex:1,pointerEvents:"none",lineHeight:"1"},children:"PAID"}),(0,n.jsxs)("header",{className:"flex justify-between items-start pb-6 border-b",children:[(0,n.jsx)(c.T,{className:"text-primary"}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold uppercase text-gray-700",children:"Receipt"}),(0,n.jsxs)("p",{className:"text-gray-500",children:["#",O.invoiceNumber]})]})]}),(0,n.jsxs)("section",{className:"flex justify-between mt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-bold text-gray-500 uppercase mb-2",children:"Bill To"}),(0,n.jsx)("p",{className:"font-bold text-lg",children:O.clientName})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold text-gray-500",children:"Date Issued:"})," ",(0,b.WU)(new Date,"PP")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold text-gray-500",children:"Original Due Date:"})," ",(0,b.WU)(O.dueDate,"PP")]})]})]}),(0,n.jsx)("section",{className:"mt-8",children:(0,n.jsxs)(l.iA,{className:"text-sm",children:[(0,n.jsx)(l.xD,{className:"bg-gray-100",children:(0,n.jsxs)(l.SC,{children:[(0,n.jsx)(l.ss,{className:"w-1/2 text-gray-600",children:"Description"}),(0,n.jsx)(l.ss,{className:"text-right text-gray-600",children:"Total"})]})}),(0,n.jsxs)(l.RM,{children:[(0,n.jsxs)(l.SC,{children:[(0,n.jsx)(l.pj,{children:"Amount carried forward from previous invoices"}),(0,n.jsx)(l.pj,{className:"text-right",children:N(E)})]}),(0,n.jsxs)(l.SC,{children:[(0,n.jsxs)(l.pj,{children:["Original Invoice Amount (#",O.invoiceNumber,")"]}),(0,n.jsx)(l.pj,{className:"text-right",children:N(O.originalAmount)})]})]})]})}),(0,n.jsx)("section",{className:"flex justify-end mt-6",children:(0,n.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Total Due Before Payment:"}),(0,n.jsx)("span",{children:N(E+O.originalAmount)})]}),(0,n.jsx)(d.Separator,{}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{className:"text-muted-foreground",children:["Payment received on ",(0,b.WU)(new Date,"PP"),":"]}),(0,n.jsxs)("span",{className:"text-green-600",children:["(",N(O.amountPaid),")"]})]}),(0,n.jsx)(d.Separator,{}),(0,n.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Total Balance Due:"}),(0,n.jsx)("span",{children:N(_)})]})]})}),(0,n.jsxs)("section",{className:"mt-8",children:[(0,n.jsx)("h4",{className:"font-bold text-gray-500 uppercase mb-2",children:"Notes"}),(0,n.jsx)(j.g,{placeholder:"Add a personal note to your client...",value:S,onChange:e=>R(e.target.value),className:"print:border-none print:p-0 print:shadow-none print:bg-transparent"})]}),(0,n.jsx)("footer",{className:"mt-12 pt-6 border-t text-center text-xs text-gray-400",children:(0,n.jsx)("p",{children:"Thank you for your business!"})})]})})]})}},29021:function(e,t,r){"use strict";r.d(t,{T:function(){return o}});var n=r(57437),s=r(87138),a=r(66648),i=r(49354);function o(e){let{className:t,width:r=48,height:o=48,...l}=e;return(0,n.jsx)(s.default,{href:"/","aria-label":"Go to Ogeemo dashboard",children:(0,n.jsx)("div",{className:(0,i.cn)("flex items-center gap-2 cursor-pointer",t),...l,children:(0,n.jsx)(a.default,{src:"/images/Ogeemo-Logo-BonT.png",alt:"Ogeemo Logo",width:r,height:o,priority:!0})})})}},89733:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var n=r(57437),s=r(2265),a=r(71538),i=r(13027),o=r(49354);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var n=r(57437),s=r(2265),a=r(49354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},29973:function(e,t,r){"use strict";r.d(t,{Separator:function(){return o}});var n=r(57437),s=r(2265),a=r(48484),i=r(49354);let o=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:o=!0,...l}=e;return(0,n.jsx)(a.f,{ref:t,decorative:o,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...l})});o.displayName=a.f.displayName},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return f},ss:function(){return u},xD:function(){return o},yt:function(){return c}});var n=r(57437),s=r(2265),a=r(49354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})});c.displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableHead";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});f.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},4919:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(57437),s=r(2265),a=r(49354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});i.displayName="Textarea"},15410:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});var n=r(2265);let s=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=(0,n.useCallback)(()=>{if(!t.current)return;let e=t.current.innerHTML;document.body.innerHTML;let r=window.open("","","height=600,width=800");if(r){r.document.write("<html><head><title>Print</title>");let t=Array.from(document.styleSheets).map(e=>e.href?'<link rel="stylesheet" href="'.concat(e.href,'">'):"").join(""),n=Array.from(document.querySelectorAll("style")).map(e=>e.outerHTML).join("");r.document.write(t),r.document.write(n),r.document.write("</head><body >"),r.document.write(e),r.document.write("</body></html>"),r.document.close(),r.focus(),setTimeout(()=>{r.print(),r.close()},500)}else{var n,s,a;let t=document.createElement("iframe");t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.border="0",document.body.appendChild(t);let r=(null===(n=t.contentWindow)||void 0===n?void 0:n.document)||t.contentDocument;r&&(r.write(e),r.close(),null===(s=t.contentWindow)||void 0===s||s.focus(),null===(a=t.contentWindow)||void 0===a||a.print()),setTimeout(()=>{document.body.removeChild(t)},500)}},[]);return{contentRef:t,triggerRef:e,handlePrint:r}}},86763:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let s=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},49354:function(e,t,r){"use strict";r.d(t,{I:function(){return i},cn:function(){return a}});var n=r(44839),s=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}async function i(e,t){try{let r=await fetch(e);if(!r.ok)throw Error("Failed to fetch file: ".concat(r.statusText));let n=await r.blob(),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(s)}catch(e){throw console.error("Download failed:",e),e}}}},function(e){e.O(0,[2641,231,1792,1313,8173,7830,2971,7023,1744],function(){return e(e.s=36215)}),_N_E=e.O()}]);