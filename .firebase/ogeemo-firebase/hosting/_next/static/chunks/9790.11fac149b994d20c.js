"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9790],{59790:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var s=r(57437),n=r(2265),a=r(25648),l=r(38087),i=r(90952),o=r(74732),c=r(19217),d=r(20530),u=r(50811),f=r(89733),m=r(54662),h=r(77209),x=r(80023),p=r(49354),j=r(80420),N=r(4306),g=r(86763),w=r(19779);function y(e){let{isOpen:t,onOpenChange:r}=e,[y,v]=(0,n.useState)([]),[b,S]=(0,n.useState)(""),[k,C]=(0,n.useState)(!1),E=(0,n.useRef)(null),Z=(0,n.useRef)(""),{toast:I}=(0,g.pm)(),{user:R}=(0,w.a)(),{status:A,isListening:q,startListening:z,stopListening:T,isSupported:V}=(0,N.I)({onTranscript:e=>{S(Z.current?"".concat(Z.current," ").concat(e):e)}});(0,n.useEffect)(()=>{!1===V&&I({variant:"destructive",title:"Voice Input Not Supported",description:"Your browser does not support the Web Speech API."})},[V,I]),(0,n.useEffect)(()=>{E.current&&E.current.scrollTo({top:E.current.scrollHeight,behavior:"smooth"})},[y]);let D=(0,n.useCallback)(async()=>{let e=b.trim();if(!e||k)return;if(!R){I({variant:"destructive",title:"Not Logged In",description:"You must be logged in to use the assistant."});return}q&&T();let t=[...y,{id:Date.now().toString(),text:e,sender:"user"}];v(t),S(""),C(!0);try{let r=await fetch("/api/genkit/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,history:t.slice(0,-1).map(e=>({role:"user"===e.sender?"user":"model",content:[{text:e.text}]}))})});if(!r.ok){let e=await r.json();throw Error(e.error||"The API returned an error.")}let s=await r.json(),n={id:(Date.now()+1).toString(),text:s.reply,sender:"ogeemo"};v(e=>[...e,n])}catch(t){console.error("Error with Ogeemo:",t);let e={id:(Date.now()+1).toString(),text:"Sorry, I encountered an error: ".concat(t.message),sender:"ogeemo"};v(t=>[...t,e])}finally{C(!1)}},[b,k,q,T,R,I,y]),L=async e=>{e.preventDefault(),D()};return(0,s.jsx)(m.Vq,{open:t,onOpenChange:e=>{!e&&q&&T(),r(e)},children:(0,s.jsxs)(m.cZ,{className:"w-full h-full max-w-none top-0 left-0 translate-x-0 translate-y-0 rounded-none sm:rounded-none flex flex-col p-0",children:[(0,s.jsxs)(m.fK,{className:"p-6 pb-4 border-b text-center relative",children:[(0,s.jsx)(m.$N,{className:"text-2xl font-bold font-headline text-primary",children:"Chat with Ogeemo"}),(0,s.jsx)(m.Be,{children:"Ask me anything or tell me what you would like to do."}),(0,s.jsx)(m.GG,{asChild:!0,className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,s.jsxs)(f.z,{variant:"ghost",size:"icon",className:"rounded-full",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})})]}),(0,s.jsx)("div",{className:"flex-1 p-6 overflow-hidden",children:(0,s.jsx)(x.ScrollArea,{className:"h-full pr-4",ref:E,children:(0,s.jsxs)("div",{className:"space-y-4",children:[0===y.length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground text-center",children:[(0,s.jsx)("p",{children:"Start the conversation..."}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Click the mic icon to start and stop dictation."})]}),y.map(e=>(0,s.jsxs)("div",{className:(0,p.cn)("flex items-start gap-3","user"===e.sender?"justify-end":"justify-start"),children:["ogeemo"===e.sender&&(0,s.jsx)(j.qE,{className:"h-8 w-8",children:(0,s.jsx)(j.Q5,{children:(0,s.jsx)(c.Z,{})})}),(0,s.jsx)("div",{className:(0,p.cn)("max-w-xs md:max-w-sm rounded-lg px-4 py-2 text-sm","user"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:e.text}),"user"===e.sender&&(0,s.jsx)(j.qE,{className:"h-8 w-8",children:(0,s.jsx)(j.Q5,{children:(0,s.jsx)(d.Z,{})})})]},e.id)),k&&(0,s.jsxs)("div",{className:"flex items-start gap-3 justify-start",children:[(0,s.jsx)(j.qE,{className:"h-8 w-8",children:(0,s.jsx)(j.Q5,{children:(0,s.jsx)(c.Z,{})})}),(0,s.jsx)("div",{className:"bg-muted rounded-lg px-4 py-2 text-sm flex items-center",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 animate-spin"})})]})]})})}),(0,s.jsx)(m.cN,{className:"p-6 pt-4 border-t shrink-0",children:(0,s.jsxs)("form",{onSubmit:L,className:"flex w-full items-center space-x-2",children:[(0,s.jsxs)(f.z,{type:"button",variant:"ghost",size:"icon",className:(0,p.cn)("flex-shrink-0",q&&"text-destructive"),onClick:()=>{q?T():(Z.current=b.trim(),z())},disabled:!1===V||k||"activating"===A,title:(e=>{if(!1===V)return"Voice input not supported";switch(e){case"listening":return"Stop dictation";case"activating":return"Activating...";default:return"Start dictation"}})(A),children:[(e=>{switch(e){case"listening":return(0,s.jsx)(a.Z,{className:"h-5 w-5"});case"activating":return(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin"});default:return(0,s.jsx)(i.Z,{className:"h-5 w-5"})}})(A),(0,s.jsx)("span",{className:"sr-only",children:"Use Voice"})]}),(0,s.jsx)(h.I,{placeholder:"Enter your message here...",value:b,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},disabled:k,autoComplete:"off"}),(0,s.jsxs)(f.z,{type:"submit",size:"icon",disabled:k||!b.trim(),children:[(0,s.jsx)(u.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Send Message"})]})]})})]})})}},80420:function(e,t,r){r.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return i}});var s=r(57437),n=r(2265),a=r(44458),l=r(49354);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})});i.displayName=a.fC.displayName;let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",r),...n})});o.displayName=a.Ee.displayName;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})});c.displayName=a.NY.displayName},80023:function(e,t,r){r.d(t,{ScrollArea:function(){return i}});var s=r(57437),n=r(2265),a=r(26770),l=r(49354);let i=n.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,s.jsxs)(a.fC,{ref:t,className:(0,l.cn)("relative overflow-hidden",r),...i,children:[(0,s.jsx)(a.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(o,{}),(0,s.jsx)(a.Ns,{})]})});i.displayName=a.fC.displayName;let o=n.forwardRef((e,t)=>{let{className:r,orientation:n="vertical",...i}=e;return(0,s.jsx)(a.gb,{ref:t,orientation:n,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...i,children:(0,s.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=a.gb.displayName},44458:function(e,t,r){r.d(t,{Ee:function(){return w},NY:function(){return y},fC:function(){return g}});var s=r(2265),n=r(98324),a=r(75137),l=r(1336),i=r(25171),o=r(57437),c="Avatar",[d,u]=(0,n.b)(c),[f,m]=d(c),h=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...n}=e,[a,l]=s.useState("idle");return(0,o.jsx)(f,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:l,children:(0,o.jsx)(i.WV.span,{...n,ref:t})})});h.displayName=c;var x="AvatarImage",p=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:n,onLoadingStatusChange:c=()=>{},...d}=e,u=m(x,r),f=function(e,t){let[r,n]=s.useState("idle");return(0,l.b)(()=>{if(!e){n("error");return}let r=!0,s=new window.Image,a=e=>()=>{r&&n(e)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(n,d.referrerPolicy),h=(0,a.W)(e=>{c(e),u.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==f&&h(f)},[f,h]),"loaded"===f?(0,o.jsx)(i.WV.img,{...d,ref:t,src:n}):null});p.displayName=x;var j="AvatarFallback",N=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:n,...a}=e,l=m(j,r),[c,d]=s.useState(void 0===n);return s.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(e)}},[n]),c&&"loaded"!==l.imageLoadingStatus?(0,o.jsx)(i.WV.span,{...a,ref:t}):null});N.displayName=j;var g=h,w=p,y=N},20530:function(e,t,r){r.d(t,{Z:function(){return s}});let s=(0,r(6497).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}}]);