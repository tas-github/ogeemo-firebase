"use strict";exports.id=9925,exports.ids=[9925],exports.modules={29925:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var r=t(10326),a=t(17577),n=t(63144),l=t(46721),i=t(61896),o=t(43020),c=t(51016),d=t(28096),x=t(42556),m=t(91664),h=t(24118),u=t(41190),f=t(3236),p=t(51223),j=t(3594),g=t(34692),N=t(84097),y=t(68136);function w({isOpen:e,onOpenChange:s}){let[t,w]=(0,a.useState)([]),[v,b]=(0,a.useState)(""),[S,C]=(0,a.useState)(!1),k=(0,a.useRef)(null),Z=(0,a.useRef)(""),{toast:z}=(0,N.pm)(),{user:E}=(0,y.a)(),{status:D,isListening:q,startListening:A,stopListening:I,isSupported:O}=(0,g.I)({onTranscript:e=>{b(Z.current?`${Z.current} ${e}`:e)}}),R=(0,a.useCallback)(async()=>{let e=v.trim();if(!e||S)return;if(!E){z({variant:"destructive",title:"Not Logged In",description:"You must be logged in to use the assistant."});return}q&&I();let s=[...t,{id:Date.now().toString(),text:e,sender:"user"}];w(s),b(""),C(!0);try{let t=await fetch("/api/genkit/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,history:s.slice(0,-1).map(e=>({role:"user"===e.sender?"user":"model",content:[{text:e.text}]}))})});if(!t.ok){let e=await t.json();throw Error(e.error||"The API returned an error.")}let r=await t.json(),a={id:(Date.now()+1).toString(),text:r.reply,sender:"ogeemo"};w(e=>[...e,a])}catch(s){console.error("Error with Ogeemo:",s);let e={id:(Date.now()+1).toString(),text:`Sorry, I encountered an error: ${s.message}`,sender:"ogeemo"};w(s=>[...s,e])}finally{C(!1)}},[v,S,q,I,E,z,t]),T=async e=>{e.preventDefault(),R()};return r.jsx(h.Vq,{open:e,onOpenChange:e=>{!e&&q&&I(),s(e)},children:(0,r.jsxs)(h.cZ,{className:"w-full h-full max-w-none top-0 left-0 translate-x-0 translate-y-0 rounded-none sm:rounded-none flex flex-col p-0",children:[(0,r.jsxs)(h.fK,{className:"p-6 pb-4 border-b text-center relative",children:[r.jsx(h.$N,{className:"text-2xl font-bold font-headline text-primary",children:"Chat with Ogeemo"}),r.jsx(h.Be,{children:"Ask me anything or tell me what you would like to do."}),r.jsx(h.GG,{asChild:!0,className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,r.jsxs)(m.z,{variant:"ghost",size:"icon",className:"rounded-full",children:[r.jsx(o.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"sr-only",children:"Close"})]})})]}),r.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:r.jsx(f.ScrollArea,{className:"h-full pr-4",ref:k,children:(0,r.jsxs)("div",{className:"space-y-4",children:[0===t.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground text-center",children:[r.jsx("p",{children:"Start the conversation..."}),r.jsx("p",{className:"text-sm mt-2",children:"Click the mic icon to start and stop dictation."})]}),t.map(e=>(0,r.jsxs)("div",{className:(0,p.cn)("flex items-start gap-3","user"===e.sender?"justify-end":"justify-start"),children:["ogeemo"===e.sender&&r.jsx(j.qE,{className:"h-8 w-8",children:r.jsx(j.Q5,{children:r.jsx(c.Z,{})})}),r.jsx("div",{className:(0,p.cn)("max-w-xs md:max-w-sm rounded-lg px-4 py-2 text-sm","user"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:e.text}),"user"===e.sender&&r.jsx(j.qE,{className:"h-8 w-8",children:r.jsx(j.Q5,{children:r.jsx(d.Z,{})})})]},e.id)),S&&(0,r.jsxs)("div",{className:"flex items-start gap-3 justify-start",children:[r.jsx(j.qE,{className:"h-8 w-8",children:r.jsx(j.Q5,{children:r.jsx(c.Z,{})})}),r.jsx("div",{className:"bg-muted rounded-lg px-4 py-2 text-sm flex items-center",children:r.jsx(l.Z,{className:"h-4 w-4 animate-spin"})})]})]})})}),r.jsx(h.cN,{className:"p-6 pt-4 border-t shrink-0",children:(0,r.jsxs)("form",{onSubmit:T,className:"flex w-full items-center space-x-2",children:[(0,r.jsxs)(m.z,{type:"button",variant:"ghost",size:"icon",className:(0,p.cn)("flex-shrink-0",q&&"text-destructive"),onClick:()=>{q?I():(Z.current=v.trim(),A())},disabled:!1===O||S||"activating"===D,title:(e=>{if(!1===O)return"Voice input not supported";switch(e){case"listening":return"Stop dictation";case"activating":return"Activating...";default:return"Start dictation"}})(D),children:[(e=>{switch(e){case"listening":return r.jsx(n.Z,{className:"h-5 w-5"});case"activating":return r.jsx(l.Z,{className:"h-5 w-5 animate-spin"});default:return r.jsx(i.Z,{className:"h-5 w-5"})}})(D),r.jsx("span",{className:"sr-only",children:"Use Voice"})]}),r.jsx(u.I,{placeholder:"Enter your message here...",value:v,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},disabled:S,autoComplete:"off"}),(0,r.jsxs)(m.z,{type:"submit",size:"icon",disabled:S||!v.trim(),children:[r.jsx(x.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"sr-only",children:"Send Message"})]})]})})]})})}},3236:(e,s,t)=>{t.d(s,{ScrollArea:()=>i});var r=t(10326),a=t(17577),n=t(16999),l=t(51223);let i=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(n.fC,{ref:a,className:(0,l.cn)("relative overflow-hidden",e),...t,children:[r.jsx(n.l_,{className:"h-full w-full rounded-[inherit]",children:s}),r.jsx(o,{}),r.jsx(n.Ns,{})]}));i.displayName=n.fC.displayName;let o=a.forwardRef(({className:e,orientation:s="vertical",...t},a)=>r.jsx(n.gb,{ref:a,orientation:s,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:r.jsx(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=n.gb.displayName}};