(()=>{var e={};e.id=7861,e.ids=[7861],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},32930:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>o}),t(87813),t(25215),t(35866),t(20306);var n=t(23191),i=t(88716),a=t(37922),r=t.n(a),c=t(95231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);t.d(s,l);let o=["",{children:["(app)",{children:["accounting",{children:["transactions",{children:["income",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,87813)),"/home/user/studio/src/app/(app)/accounting/transactions/income/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25215)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,20306)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/user/studio/src/app/(app)/accounting/transactions/income/page.tsx"],p="/(app)/accounting/transactions/income/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(app)/accounting/transactions/income/page",pathname:"/accounting/transactions/income",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},82743:(e,s,t)=>{Promise.resolve().then(t.bind(t,933)),Promise.resolve().then(t.bind(t,46618)),Promise.resolve().then(t.bind(t,79067))},79067:(e,s,t)=>{"use strict";t.r(s),t.d(s,{IncomeView:()=>_});var n=t(10326),i=t(17577),a=t.n(i),r=t(90434),c=t(41156),l=t(29752),o=t(91664),d=t(43891),p=t(38655),m=t(46721),x=t(14289),u=t(64150),h=t(5722),j=t(37084),g=t(17700),v=t(10143),y=t(24118),N=t(55296),f=t(41190),b=t(44794),w=t(29280),C=t(84097),S=t(3282),T=t(68136),q=t(51920);let P={date:"",company:"",description:"",amount:"",incomeType:"",depositedTo:"",explanation:"",documentNumber:"",type:"business"},I=["Service Revenue","Consulting","Sales Revenue","Other Income","Invoice Payment"],A=["Client Alpha","Client Beta","E-commerce Store","Affiliate Payout"],F=["Bank Account #1","Credit Card #1","Cash Account"];function _(){let[e,s]=a().useState([]),[t,i]=a().useState(!0),{user:_}=(0,T.a)(),[k,L]=a().useState(I),[D,Z]=a().useState(A),[E,G]=a().useState(F),[O,V]=a().useState(!1),[z,B]=a().useState(null),[M,R]=a().useState(null),[X,$]=a().useState(P),[Q,U]=a().useState(""),{toast:H}=(0,C.pm)(),K=e=>{e?(B(e),$({date:e.date,company:e.company,description:e.description,amount:String(e.amount),incomeType:e.incomeType,depositedTo:e.depositedTo,explanation:e.explanation||"",documentNumber:e.documentNumber||"",type:e.type||"business"})):(B(null),$(P)),V(!0)},Y=async()=>{if(!_)return;let e=parseFloat(X.amount);if(!X.date||!X.company||!X.incomeType||!X.amount||isNaN(e)||e<=0){H({variant:"destructive",title:"Invalid Input",description:"Please fill all required fields correctly."});return}let t={date:X.date,company:X.company,description:X.description.trim(),amount:e,incomeType:X.incomeType,depositedTo:X.depositedTo,explanation:X.explanation.trim(),documentNumber:X.documentNumber.trim(),type:X.type};try{if(z)await (0,q.FH)(z.id,t),s(e=>e.map(e=>e.id===z.id?{...e,...t}:e)),H({title:"Income Transaction Updated"});else{let e=await (0,q.$K)({...t,userId:_.uid});s(s=>[e,...s]),H({title:"Income Transaction Added"})}V(!1)}catch(e){H({variant:"destructive",title:"Save Failed",description:e.message})}},W=async()=>{if(M)try{await (0,q.HS)(M.id),s(e=>e.filter(e=>e.id!==M.id)),H({title:"Transaction Deleted"})}catch(e){H({variant:"destructive",title:"Delete Failed",description:e.message})}finally{R(null)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[n.jsx(g.X,{pageTitle:"Manage Income"}),(0,n.jsxs)("header",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Income"}),n.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Review and manage all incoming revenue."})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx(l.ll,{children:"Income Transactions"}),n.jsx(l.SZ,{children:"A list of all recorded income."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx(o.z,{asChild:!0,variant:"outline",children:(0,n.jsxs)(r.default,{href:"/accounting/transactions/expenses",children:[n.jsx(d.Z,{className:"mr-2 h-4 w-4"})," Go to Expenses"]})}),(0,n.jsxs)(o.z,{variant:"outline",onClick:()=>K(),children:[n.jsx(p.Z,{className:"mr-2 h-4 w-4"})," Add Income"]})]})]}),n.jsx(l.aY,{children:t?n.jsx("div",{className:"flex justify-center items-center h-48",children:n.jsx(m.Z,{className:"h-8 w-8 animate-spin"})}):(0,n.jsxs)(c.iA,{children:[n.jsx(c.xD,{children:(0,n.jsxs)(c.SC,{children:[n.jsx(c.ss,{children:"Date"}),n.jsx(c.ss,{children:"Company"}),n.jsx(c.ss,{children:"Description"}),n.jsx(c.ss,{children:"Income Type"}),n.jsx(c.ss,{className:"text-right",children:"Amount"}),n.jsx(c.ss,{children:n.jsx("span",{className:"sr-only",children:"Actions"})})]})}),n.jsx(c.RM,{children:e.map(e=>(0,n.jsxs)(c.SC,{children:[n.jsx(c.pj,{children:e.date}),n.jsx(c.pj,{children:e.company}),n.jsx(c.pj,{children:e.description}),n.jsx(c.pj,{children:e.incomeType}),n.jsx(c.pj,{className:"text-right font-mono text-green-600",children:e.amount.toLocaleString("en-US",{style:"currency",currency:"USD"})}),n.jsx(c.pj,{children:(0,n.jsxs)(v.h_,{children:[n.jsx(v.$F,{asChild:!0,children:(0,n.jsxs)(o.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(x.Z,{className:"h-4 w-4"})]})}),(0,n.jsxs)(v.AW,{align:"end",children:[(0,n.jsxs)(v.Xi,{onSelect:()=>K(e),children:[n.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Open"]}),(0,n.jsxs)(v.Xi,{onSelect:()=>K(e),children:[n.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,n.jsxs)(v.Xi,{className:"text-destructive",onSelect:()=>R(e),children:[n.jsx(j.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id))})]})})]})]}),n.jsx(y.Vq,{open:O,onOpenChange:V,children:(0,n.jsxs)(y.cZ,{children:[n.jsx(y.fK,{className:"text-center sm:text-center",children:n.jsx(y.$N,{className:"text-2xl text-primary",children:z?"Edit Income":"Add Income"})}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-date",className:"text-right",children:["Date ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(f.I,{id:"tx-date",type:"date",value:X.date,onChange:e=>$(s=>({...s,date:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-company",className:"text-right",children:["Company ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx("div",{className:"col-span-3 flex items-center gap-2",children:(0,n.jsxs)(w.Ph,{value:X.company,onValueChange:e=>$(s=>({...s,company:e})),children:[n.jsx(w.i4,{id:"tx-company",className:"w-full",children:n.jsx(w.ki,{placeholder:"Select or add a company"})}),n.jsx(w.Bw,{children:D.map(e=>n.jsx(w.Ql,{value:e,children:e},e))})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-doc-number",className:"text-right",children:"Document #"}),n.jsx(f.I,{id:"tx-doc-number",value:X.documentNumber,onChange:e=>$(s=>({...s,documentNumber:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-description",className:"text-right",children:"Description"}),n.jsx(f.I,{id:"tx-description",value:X.description,onChange:e=>$(s=>({...s,description:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-amount",className:"text-right",children:["Amount ",n.jsx("span",{className:"text-destructive",children:"*"})]}),(0,n.jsxs)("div",{className:"relative col-span-3",children:[n.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground",children:"$"}),n.jsx(f.I,{id:"tx-amount",type:"number",value:X.amount,onChange:e=>$(s=>({...s,amount:e.target.value})),className:"pl-7",step:"0.01",placeholder:"0.00"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-deposit-account",className:"text-right",children:"Deposited To"}),n.jsx("div",{className:"col-span-3 flex items-center gap-2",children:(0,n.jsxs)(w.Ph,{value:X.depositedTo,onValueChange:e=>$(s=>({...s,depositedTo:e})),children:[n.jsx(w.i4,{id:"tx-deposit-account",className:"w-full",children:n.jsx(w.ki,{placeholder:"Select an account"})}),n.jsx(w.Bw,{children:E.map(e=>n.jsx(w.Ql,{value:e,children:e},e))})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-income-type",className:"text-right",children:["Income Type ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx("div",{className:"col-span-3 flex items-center gap-2",children:(0,n.jsxs)(w.Ph,{value:X.incomeType,onValueChange:e=>$(s=>({...s,incomeType:e})),children:[n.jsx(w.i4,{id:"tx-income-type",className:"w-full",children:n.jsx(w.ki,{placeholder:"Select a type"})}),n.jsx(w.Bw,{children:k.map(e=>n.jsx(w.Ql,{value:e,children:e},e))})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-explanation",className:"text-right",children:"Explanation"}),n.jsx(f.I,{id:"tx-explanation",value:X.explanation,onChange:e=>$(s=>({...s,explanation:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-type",className:"text-right",children:"Type"}),(0,n.jsxs)(S.E,{value:X.type,onValueChange:e=>$(s=>({...s,type:e})),className:"col-span-3 flex items-center space-x-4",id:"tx-type",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(S.m,{value:"business",id:"type-business-inc"}),n.jsx(b.Label,{htmlFor:"type-business-inc",children:"Business"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(S.m,{value:"personal",id:"type-personal-inc"}),n.jsx(b.Label,{htmlFor:"type-personal-inc",children:"Personal"})]})]})]})]}),(0,n.jsxs)(y.cN,{children:[n.jsx(o.z,{variant:"ghost",onClick:()=>V(!1),children:"Cancel"}),n.jsx(o.z,{onClick:Y,children:z?"Save Changes":"Save Income"})]})]})}),n.jsx(N.aR,{open:!!M,onOpenChange:()=>R(null),children:(0,n.jsxs)(N._T,{children:[(0,n.jsxs)(N.fY,{children:[n.jsx(N.f$,{children:"Are you sure?"}),(0,n.jsxs)(N.yT,{children:['This action will permanently delete the transaction: "',M?.description,'".']})]}),(0,n.jsxs)(N.xo,{children:[n.jsx(N.le,{children:"Cancel"}),n.jsx(N.OL,{onClick:W,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}},87813:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var n=t(19510),i=t(55782),a=t(53397);let r=(0,i.default)(()=>t.e(555).then(t.bind(t,60555)).then(e=>e.IncomeView),{loadableGenerated:{modules:["app/(app)/accounting/transactions/income/page.tsx -> @/components/accounting/income-view"]},ssr:!1,loading:()=>n.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(a.Z,{className:"h-10 w-10 animate-spin text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading Income Manager..."})]})})});function c(){return n.jsx(r,{})}},43891:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});let n=(0,t(9664).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[8948,7514,6621,2371,7040,6458,4428,5360,8606,5338,450,5636],()=>t(32930));module.exports=n})();