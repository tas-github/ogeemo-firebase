(()=>{var e={};e.id=2467,e.ids=[2467],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},73241:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o}),t(44125),t(25215),t(35866),t(20306);var n=t(23191),a=t(88716),r=t(37922),i=t.n(r),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["(app)",{children:["accounting",{children:["transactions",{children:["expenses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,44125)),"/home/user/studio/src/app/(app)/accounting/transactions/expenses/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25215)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,20306)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/user/studio/src/app/(app)/accounting/transactions/expenses/page.tsx"],x="/(app)/accounting/transactions/expenses/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/accounting/transactions/expenses/page",pathname:"/accounting/transactions/expenses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},50402:(e,s,t)=>{Promise.resolve().then(t.bind(t,933)),Promise.resolve().then(t.bind(t,46618)),Promise.resolve().then(t.bind(t,31165))},31165:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ExpenseView:()=>A});var n=t(10326),a=t(17577),r=t.n(a),i=t(90434),l=t(41156),c=t(29752),o=t(91664),d=t(91915),x=t(38655),p=t(46721),u=t(14289),m=t(64150),h=t(5722),j=t(37084),g=t(17700),v=t(10143),y=t(24118),N=t(55296),f=t(41190),b=t(44794),w=t(29280),C=t(84097),S=t(3282),q=t(68136),P=t(51920);let E={date:"",company:"",description:"",amount:"",category:"",explanation:"",documentNumber:"",type:"business"},_=["Utilities","Software","Office Supplies","Contractors","Marketing","Travel","Meals"],F=["Cloud Hosting Inc.","SaaS Tools Co.","Office Supply Hub","Jane Designs"];function A(){let[e,s]=r().useState([]),[t,a]=r().useState(!0),{user:A}=(0,q.a)(),[k,L]=r().useState(_),[T,Z]=r().useState(F),[D,I]=r().useState(!1),[O,G]=r().useState(null),[M,V]=r().useState(null),[z,U]=r().useState(E),[X,R]=r().useState(""),{toast:$}=(0,C.pm)(),B=e=>{e?(G(e),U({date:e.date,company:e.company,description:e.description,amount:String(e.amount),category:e.category,explanation:e.explanation||"",documentNumber:e.documentNumber||"",type:e.type||"business"})):(G(null),U(E)),I(!0)},Y=async()=>{if(!A)return;let e=parseFloat(z.amount);if(!z.date||!z.company||!z.category||!z.amount||isNaN(e)||e<=0){$({variant:"destructive",title:"Invalid Input",description:"Please fill all required fields correctly."});return}let t={date:z.date,description:z.description.trim(),amount:e,category:z.category,company:z.company.trim(),explanation:z.explanation.trim(),documentNumber:z.documentNumber.trim(),type:z.type};try{if(O)await (0,P.rV)(O.id,t),s(e=>e.map(e=>e.id===O.id?{...e,...t}:e)),$({title:"Expense Transaction Updated"});else{let e=await (0,P.mU)({...t,userId:A.uid});s(s=>[e,...s]),$({title:"Expense Transaction Added"})}I(!1)}catch(e){$({variant:"destructive",title:"Save Failed",description:e.message})}},H=async()=>{if(M)try{await (0,P.NY)(M.id),s(e=>e.filter(e=>e.id!==M.id)),$({title:"Transaction Deleted"})}catch(e){$({variant:"destructive",title:"Delete Failed",description:e.message})}finally{V(null)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[n.jsx(g.X,{pageTitle:"Manage Expenses"}),(0,n.jsxs)("header",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Expenses"}),n.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Review and manage all business expenditures."})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx(c.ll,{children:"Expense Transactions"}),n.jsx(c.SZ,{children:"A list of all recorded expenses."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx(o.z,{asChild:!0,variant:"outline",children:(0,n.jsxs)(i.default,{href:"/accounting/transactions/income",children:[n.jsx(d.Z,{className:"mr-2 h-4 w-4"})," Go to Income"]})}),(0,n.jsxs)(o.z,{variant:"outline",onClick:()=>B(),children:[n.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Add Expense"]})]})]}),n.jsx(c.aY,{children:t?n.jsx("div",{className:"flex justify-center items-center h-48",children:n.jsx(p.Z,{className:"h-8 w-8 animate-spin"})}):(0,n.jsxs)(l.iA,{children:[n.jsx(l.xD,{children:(0,n.jsxs)(l.SC,{children:[n.jsx(l.ss,{children:"Date"}),n.jsx(l.ss,{children:"Company"}),n.jsx(l.ss,{children:"Description"}),n.jsx(l.ss,{children:"Category"}),n.jsx(l.ss,{className:"text-right",children:"Amount"}),n.jsx(l.ss,{children:n.jsx("span",{className:"sr-only",children:"Actions"})})]})}),n.jsx(l.RM,{children:e.map(e=>(0,n.jsxs)(l.SC,{children:[n.jsx(l.pj,{children:e.date}),n.jsx(l.pj,{children:e.company}),n.jsx(l.pj,{children:e.description}),n.jsx(l.pj,{children:e.category}),(0,n.jsxs)(l.pj,{className:"text-right font-mono text-red-600",children:["(",e.amount.toLocaleString("en-US",{style:"currency",currency:"USD"}),")"]}),n.jsx(l.pj,{children:(0,n.jsxs)(v.h_,{children:[n.jsx(v.$F,{asChild:!0,children:(0,n.jsxs)(o.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(u.Z,{className:"h-4 w-4"})]})}),(0,n.jsxs)(v.AW,{align:"end",children:[(0,n.jsxs)(v.Xi,{onSelect:()=>B(e),children:[n.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Open"]}),(0,n.jsxs)(v.Xi,{onSelect:()=>B(e),children:[n.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,n.jsxs)(v.Xi,{className:"text-destructive",onSelect:()=>V(e),children:[n.jsx(j.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id))})]})})]})]}),n.jsx(y.Vq,{open:D,onOpenChange:I,children:(0,n.jsxs)(y.cZ,{children:[n.jsx(y.fK,{className:"text-center sm:text-center",children:n.jsx(y.$N,{className:"text-2xl text-primary",children:O?"Edit Expense":"Add Expense"})}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-date",className:"text-right",children:["Date ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(f.I,{id:"tx-date",type:"date",value:z.date,onChange:e=>U(s=>({...s,date:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-company",className:"text-right",children:["Company ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx("div",{className:"col-span-3 flex items-center gap-2",children:(0,n.jsxs)(w.Ph,{value:z.company,onValueChange:e=>U(s=>({...s,company:e})),children:[n.jsx(w.i4,{id:"tx-company",className:"w-full",children:n.jsx(w.ki,{placeholder:"Select or add a company"})}),n.jsx(w.Bw,{children:T.map(e=>n.jsx(w.Ql,{value:e,children:e},e))})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-doc-number",className:"text-right",children:"Document #"}),n.jsx(f.I,{id:"tx-doc-number",value:z.documentNumber,onChange:e=>U(s=>({...s,documentNumber:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-description",className:"text-right",children:"Description"}),n.jsx(f.I,{id:"tx-description",value:z.description,onChange:e=>U(s=>({...s,description:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-amount",className:"text-right",children:["Amount ",n.jsx("span",{className:"text-destructive",children:"*"})]}),(0,n.jsxs)("div",{className:"relative col-span-3",children:[n.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground",children:"$"}),n.jsx(f.I,{id:"tx-amount",type:"number",value:z.amount,onChange:e=>U(s=>({...s,amount:e.target.value})),className:"pl-7",step:"0.01",placeholder:"0.00"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(b.Label,{htmlFor:"tx-category",className:"text-right",children:["Category ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx("div",{className:"col-span-3 flex items-center gap-2",children:(0,n.jsxs)(w.Ph,{value:z.category,onValueChange:e=>U(s=>({...s,category:e})),children:[n.jsx(w.i4,{className:"w-full",children:n.jsx(w.ki,{placeholder:"Select a category"})}),n.jsx(w.Bw,{children:k.map(e=>n.jsx(w.Ql,{value:e,children:e},e))})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-explanation",className:"text-right",children:"Explanation"}),n.jsx(f.I,{id:"tx-explanation",value:z.explanation,onChange:e=>U(s=>({...s,explanation:e.target.value})),className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx(b.Label,{htmlFor:"tx-type",className:"text-right",children:"Type"}),(0,n.jsxs)(S.E,{value:z.type,onValueChange:e=>U(s=>({...s,type:e})),className:"col-span-3 flex items-center space-x-4",id:"tx-type",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(S.m,{value:"business",id:"type-business-exp"}),n.jsx(b.Label,{htmlFor:"type-business-exp",children:"Business"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(S.m,{value:"personal",id:"type-personal-exp"}),n.jsx(b.Label,{htmlFor:"type-personal-exp",children:"Personal"})]})]})]})]}),(0,n.jsxs)(y.cN,{children:[n.jsx(o.z,{variant:"ghost",onClick:()=>I(!1),children:"Cancel"}),n.jsx(o.z,{onClick:Y,children:O?"Save Changes":"Save Expense"})]})]})}),n.jsx(N.aR,{open:!!M,onOpenChange:()=>V(null),children:(0,n.jsxs)(N._T,{children:[(0,n.jsxs)(N.fY,{children:[n.jsx(N.f$,{children:"Are you sure?"}),(0,n.jsxs)(N.yT,{children:['This action will permanently delete the transaction: "',M?.description,'".']})]}),(0,n.jsxs)(N.xo,{children:[n.jsx(N.le,{children:"Cancel"}),n.jsx(N.OL,{onClick:H,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}},44125:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var n=t(19510),a=t(55782),r=t(53397);let i=(0,a.default)(()=>t.e(5461).then(t.bind(t,65461)).then(e=>e.ExpenseView),{loadableGenerated:{modules:["app/(app)/accounting/transactions/expenses/page.tsx -> @/components/accounting/expense-view"]},ssr:!1,loading:()=>n.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(r.Z,{className:"h-10 w-10 animate-spin text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading Expense Manager..."})]})})});function l(){return n.jsx(i,{})}},91915:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});let n=(0,t(9664).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[8948,7514,6621,2371,7040,6458,4428,5360,8606,5338,450,5636],()=>t(73241));module.exports=n})();