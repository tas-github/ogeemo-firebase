(()=>{var e={};e.id=5304,e.ids=[5304],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(89366),s(25215),s(35866),s(20306);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let c=["",{children:["(app)",{children:["projects",{children:["[projectId]",{children:["planning",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,89366)),"/home/user/studio/src/app/(app)/projects/[projectId]/planning/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,25215)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20306)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/user/studio/src/app/(app)/projects/[projectId]/planning/page.tsx"],u="/(app)/projects/[projectId]/planning/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/projects/[projectId]/planning/page",pathname:"/projects/[projectId]/planning",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},74734:(e,t,s)=>{let a={"063e14528f074c4b26a38eebf71e9361694f0c1e":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.deleteProject),"080d5ef7232b29c1c3b261fcd726cafbcc69c3ea":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.updateTask),"09794e8dcdf04eaa9f6ab8d470608007b179b0ff":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.getProjectById),"1d4b448501345a5df9d9bfd9e9372186dc07433e":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.addProjectWithTasks),"1f110a383a5558a172c9ad8d9b24cc1e8376eab0":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.getProjectTemplates),"20ea5827869024758ea1369c501b5fe05e177fc7":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.addProjectTemplate),"3d053f6b913248a930d32d6a2468fd1b6936ccf5":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.getProjects),"4432788b4f7b855f470bfdfbeb99de7765710d70":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.updateProjectWithTasks),"4ac30c7452e54d345cf8b59a07bdcd2c4911f0ee":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.getTasksForProject),"70ebac256eab694a13bce309a154f4fe339b7353":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.getTasksForUser),"7e32b891fa54d283b5e79d141b4db9488e22dd10":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.addTask),"969774e54d243a66af66967419c787636372737d":()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.updateTaskPositions),ab7fe8e2c4d14f04cd8052b8098482d3031f2155:()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.deleteTask),d5d7d880209157df6fc4daefd81c13e406a3e7ed:()=>Promise.resolve().then(s.bind(s,58092)).then(e=>e.updateProject)};async function r(e,...t){return(await a[e]()).apply(null,t)}e.exports={"063e14528f074c4b26a38eebf71e9361694f0c1e":r.bind(null,"063e14528f074c4b26a38eebf71e9361694f0c1e"),"080d5ef7232b29c1c3b261fcd726cafbcc69c3ea":r.bind(null,"080d5ef7232b29c1c3b261fcd726cafbcc69c3ea"),"09794e8dcdf04eaa9f6ab8d470608007b179b0ff":r.bind(null,"09794e8dcdf04eaa9f6ab8d470608007b179b0ff"),"1d4b448501345a5df9d9bfd9e9372186dc07433e":r.bind(null,"1d4b448501345a5df9d9bfd9e9372186dc07433e"),"1f110a383a5558a172c9ad8d9b24cc1e8376eab0":r.bind(null,"1f110a383a5558a172c9ad8d9b24cc1e8376eab0"),"20ea5827869024758ea1369c501b5fe05e177fc7":r.bind(null,"20ea5827869024758ea1369c501b5fe05e177fc7"),"3d053f6b913248a930d32d6a2468fd1b6936ccf5":r.bind(null,"3d053f6b913248a930d32d6a2468fd1b6936ccf5"),"4432788b4f7b855f470bfdfbeb99de7765710d70":r.bind(null,"4432788b4f7b855f470bfdfbeb99de7765710d70"),"4ac30c7452e54d345cf8b59a07bdcd2c4911f0ee":r.bind(null,"4ac30c7452e54d345cf8b59a07bdcd2c4911f0ee"),"70ebac256eab694a13bce309a154f4fe339b7353":r.bind(null,"70ebac256eab694a13bce309a154f4fe339b7353"),"7e32b891fa54d283b5e79d141b4db9488e22dd10":r.bind(null,"7e32b891fa54d283b5e79d141b4db9488e22dd10"),"969774e54d243a66af66967419c787636372737d":r.bind(null,"969774e54d243a66af66967419c787636372737d"),ab7fe8e2c4d14f04cd8052b8098482d3031f2155:r.bind(null,"ab7fe8e2c4d14f04cd8052b8098482d3031f2155"),d5d7d880209157df6fc4daefd81c13e406a3e7ed:r.bind(null,"d5d7d880209157df6fc4daefd81c13e406a3e7ed")}},86314:(e,t,s)=>{Promise.resolve().then(s.bind(s,933)),Promise.resolve().then(s.bind(s,46618)),Promise.resolve().then(s.bind(s,81576))},81576:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ProjectPlanningView:()=>q});var a=s(10326),r=s(17577),n=s(90434),i=s(35047),d=s(29752),l=s(91664),c=s(41190),o=s(44794),u=s(82015),p=s(46721),h=s(9921),f=s(60883),x=s(71315),m=s(37084),b=s(68136),j=s(84097),v=s(15651),g=s(3115),y=s(98181),P=s(51223),N=s(51027),k=s(33194),w=s(29280),S=s(69654);let C=e=>{e<0&&(e=0);let t=Math.floor(e/60),s=e%60,a=t>0?`${t} hour${t>1?"s":""}`:"",r=s>0?`${s} minute${s>1?"s":""}`:"";return a&&r?`${a}, ${r}`:a||r||"0 minutes"};function q({projectId:e}){let[t,s]=(0,r.useState)(null),[q,T]=(0,r.useState)(!0),[I,Z]=(0,r.useState)([]),[M,E]=(0,r.useState)(""),[_,D]=(0,r.useState)(""),[L,R]=(0,r.useState)(1),[A,F]=(0,r.useState)(0),[z,V]=(0,r.useState)(new Date),[$,G]=(0,r.useState)(String(new Date().getHours())),[W,H]=(0,r.useState)("0"),[B,O]=(0,r.useState)(!0),{user:U}=(0,b.a)(),{toast:Y}=(0,j.pm)(),K=(0,i.useRouter)();(0,r.useCallback)(async()=>{T(!0);try{let t=await (0,v.Rp)(e);t?(s(t),Z(t.steps||[])):(Y({variant:"destructive",title:"Error",description:"Project not found."}),K.push("/projects"))}catch(e){Y({variant:"destructive",title:"Failed to load project",description:e.message})}finally{T(!1)}},[e,K,Y]);let Q=Array.from({length:24},(e,t)=>{let s=(0,g.t)(new Date,{hours:t});return{value:String(t),label:(0,y.WU)(s,"h a")}}),X=Array.from({length:12},(e,t)=>{let s=5*t;return{value:String(s),label:`:${s.toString().padStart(2,"0")}`}}),J=e=>{Z(t=>t.filter(t=>t.id!==e))},ee=async()=>{if(t&&U)try{await (0,v.fk)(U.uid,t.id,{steps:I}),Y({title:"Project Plan Saved",description:"Your project steps and any associated calendar events have been saved."}),K.push("/projects")}catch(e){Y({variant:"destructive",title:"Save Failed",description:e.message})}};return q?a.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a.jsx(p.Z,{className:"h-10 w-10 animate-spin text-primary"})}):t?(0,a.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[(0,a.jsxs)("header",{className:"relative text-center",children:[a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2",children:a.jsx(l.z,{asChild:!0,variant:"outline",children:(0,a.jsxs)(n.default,{href:"/projects",children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Back to Projects"]})})}),a.jsx("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Project Planning"}),a.jsx("p",{className:"text-muted-foreground",children:t.name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[(0,a.jsxs)(d.Zb,{className:"lg:col-span-1",children:[(0,a.jsxs)(d.Ol,{children:[a.jsx(d.ll,{children:"Add a New Step"}),a.jsx(d.SZ,{children:"Define the tasks required to complete this project."})]}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o.Label,{htmlFor:"step-title",children:"Step Title"}),a.jsx(c.I,{id:"step-title",value:M,onChange:e=>E(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o.Label,{htmlFor:"step-desc",children:"Description"}),a.jsx(u.g,{id:"step-desc",value:_,onChange:e=>D(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o.Label,{children:"Estimate Duration, Hrs. Min."}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[a.jsx(o.Label,{htmlFor:"step-hours",className:"text-xs text-muted-foreground",children:"Hours"}),a.jsx(c.I,{id:"step-hours",type:"number",min:"0",value:L,onChange:e=>R(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[a.jsx(o.Label,{htmlFor:"step-minutes",className:"text-xs text-muted-foreground",children:"Minutes"}),a.jsx(c.I,{id:"step-minutes",type:"number",min:"0",max:"59",step:"5",value:A,onChange:e=>F(Number(e.target.value))})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[a.jsx(S.Checkbox,{id:"connect-to-calendar",checked:B,onCheckedChange:e=>O(!!e)}),(0,a.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[a.jsx("label",{htmlFor:"connect-to-calendar",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Add to Calendar"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Schedules this step as a task in the calendar."})]})]}),B&&(0,a.jsxs)("div",{className:"space-y-2 animate-in fade-in-50 duration-300",children:[a.jsx(o.Label,{children:"Start Date & Time"}),a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)(N.J2,{children:[a.jsx(N.xo,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:(0,P.cn)("w-full justify-start text-left font-normal",!z&&"text-muted-foreground"),children:[a.jsx(f.Z,{className:"mr-2 h-4 w-4"}),z?(0,y.WU)(z,"PPP"):a.jsx("span",{children:"Pick a date"})]})}),a.jsx(N.yk,{className:"w-auto p-0",align:"start",children:a.jsx(k.f,{mode:"single",selected:z,onSelect:V,initialFocus:!0})})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(w.Ph,{value:$,onValueChange:G,children:[a.jsx(w.i4,{children:a.jsx(w.ki,{})}),a.jsx(w.Bw,{children:Q.map(e=>a.jsx(w.Ql,{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)(w.Ph,{value:W,onValueChange:H,children:[a.jsx(w.i4,{children:a.jsx(w.ki,{})}),a.jsx(w.Bw,{children:X.map(e=>a.jsx(w.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)(l.z,{onClick:()=>{let e=60*(Number(L)||0)+(Number(A)||0);if(!M.trim()||e<=0){Y({variant:"destructive",title:"Missing Information",description:"Please provide a title and a duration greater than 0."});return}let t=null;B&&z&&(t=(0,g.t)(z,{hours:parseInt($),minutes:parseInt(W)}));let s={id:`temp_${Date.now()}`,title:M,description:_,durationMinutes:e,isBillable:!0,connectToCalendar:B,startTime:t,isCompleted:!1};Z(e=>[...e,s]),E(""),D(""),R(1),F(0)},className:"w-full",children:[a.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Add Step to Plan"]})]})]}),(0,a.jsxs)(d.Zb,{className:"lg:col-span-2",children:[(0,a.jsxs)(d.Ol,{children:[a.jsx(d.ll,{children:"Project Plan"}),a.jsx(d.SZ,{children:"Review the steps defined for this project."})]}),a.jsx(d.aY,{children:I.length>0?a.jsx("div",{className:"space-y-4",children:I.map((e,t)=>(0,a.jsxs)(d.Zb,{className:"p-4 flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold",children:[t+1,". ",e.title]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Est. Duration: ",C(e.durationMinutes)]}),e.connectToCalendar&&e.startTime&&(0,a.jsxs)("p",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[a.jsx(f.Z,{className:"h-3 w-3"}),"Scheduled for ",(0,y.WU)(e.startTime,"PPp")]})]}),a.jsx(l.z,{variant:"ghost",size:"icon",onClick:()=>J(e.id),children:a.jsx(m.Z,{className:"h-4 w-4 text-destructive"})})]},e.id))}):(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-16 border-2 border-dashed rounded-lg",children:[a.jsx("p",{children:"No steps defined yet."}),a.jsx("p",{className:"text-sm",children:"Use the form on the left to add the first step."})]})}),I.length>0&&a.jsx("div",{className:"p-6 pt-0",children:a.jsx(l.z,{onClick:ee,className:"w-full",children:"Save Project Plan"})})]})]})]}):a.jsx("div",{className:"p-4",children:"Project not found."})}},69654:(e,t,s)=>{"use strict";s.d(t,{Checkbox:()=>S});var a=s(10326),r=s(17577),n=s(48051),i=s(93095),d=s(82561),l=s(52067),c=s(53405),o=s(2566),u=s(9815),p=s(45226),h="Checkbox",[f,x]=(0,i.b)(h),[m,b]=f(h),j=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:i,checked:c,defaultChecked:o,required:u,disabled:h,value:f="on",onCheckedChange:x,form:b,...j}=e,[v,g]=r.useState(null),k=(0,n.e)(t,e=>g(e)),w=r.useRef(!1),S=!v||b||!!v.closest("form"),[C=!1,q]=(0,l.T)({prop:c,defaultProp:o,onChange:x}),T=r.useRef(C);return r.useEffect(()=>{let e=v?.form;if(e){let t=()=>q(T.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,q]),(0,a.jsxs)(m,{scope:s,state:C,disabled:h,children:[(0,a.jsx)(p.WV.button,{type:"button",role:"checkbox","aria-checked":P(C)?"mixed":C,"aria-required":u,"data-state":N(C),"data-disabled":h?"":void 0,disabled:h,value:f,...j,ref:k,onKeyDown:(0,d.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.M)(e.onClick,e=>{q(e=>!!P(e)||!e),S&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),S&&(0,a.jsx)(y,{control:v,bubbles:!w.current,name:i,value:f,checked:C,required:u,disabled:h,form:b,style:{transform:"translateX(-100%)"},defaultChecked:!P(o)&&o})]})});j.displayName=h;var v="CheckboxIndicator",g=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...n}=e,i=b(v,s);return(0,a.jsx)(u.z,{present:r||P(i.state)||!0===i.state,children:(0,a.jsx)(p.WV.span,{"data-state":N(i.state),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});g.displayName=v;var y=e=>{let{control:t,checked:s,bubbles:n=!0,defaultChecked:i,...d}=e,l=r.useRef(null),u=(0,c.D)(s),p=(0,o.t)(t);r.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==s&&t){let a=new Event("click",{bubbles:n});e.indeterminate=P(s),t.call(e,!P(s)&&s),e.dispatchEvent(a)}},[u,s,n]);let h=r.useRef(!P(s)&&s);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??h.current,...d,tabIndex:-1,ref:l,style:{...e.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P(e){return"indeterminate"===e}function N(e){return P(e)?"indeterminate":e?"checked":"unchecked"}var k=s(70744),w=s(51223);let S=r.forwardRef(({className:e,...t},s)=>a.jsx(j,{ref:s,className:(0,w.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(g,{className:(0,w.cn)("flex items-center justify-center text-current"),children:a.jsx(k.Z,{className:"h-4 w-4"})})}));S.displayName=j.displayName},89366:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(19510),r=s(55782),n=s(53397);let i=(0,r.default)(()=>s.e(686).then(s.bind(s,40686)).then(e=>e.ProjectPlanningView),{loadableGenerated:{modules:["src/app/(app)/projects/[projectId]/planning/page.tsx -> @/components/tasks/project-planning-view"]},ssr:!1,loading:()=>a.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(n.Z,{className:"h-10 w-10 animate-spin text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading Project Plan..."})]})})});function d({params:e}){return a.jsx(i,{projectId:e.projectId})}},9921:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9664).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},71315:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9664).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},37084:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9664).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,7514,6621,2371,7040,6458,7344,8181,4428,621,6355,8606,5338,2735],()=>s(58160));module.exports=a})();