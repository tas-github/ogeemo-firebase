(()=>{var e={};e.id=9035,e.ids=[9035],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},54923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c}),r(74045),r(25215),r(35866),r(20306);var s=r(23191),i=r(88716),n=r(37922),a=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["(app)",{children:["simple-chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,74045)),"/home/user/studio/src/app/(app)/simple-chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,25215)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20306)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/home/user/studio/src/app/(app)/simple-chat/page.tsx"],d="/(app)/simple-chat/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(app)/simple-chat/page",pathname:"/simple-chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},13428:(e,t,r)=>{Promise.resolve().then(r.bind(r,16706))},16706:(e,t,r)=>{"use strict";r.d(t,{SimpleChatView:()=>v});var s=r(10326),i=r(17577),n=r(63144),a=r(46721),l=r(61896),o=r(51016),c=r(28096),u=r(42556),d=r(91664),p=r(29752),x=r(41190),h=r(3236),m=r(51223),f=r(3594),g=r(34692),y=r(84097);function v(){let[e,t]=(0,i.useState)([]),[r,v]=(0,i.useState)(""),[w,j]=(0,i.useState)(!1),b=(0,i.useRef)(null),N=(0,i.useRef)(""),{toast:q}=(0,y.pm)(),{status:S,isListening:k,startListening:P,stopListening:Z,isSupported:C}=(0,g.I)({onTranscript:e=>{v(N.current?`${N.current} ${e}`:e)}}),A=(0,i.useCallback)(async()=>{let s=r.trim();if(!s||w)return;k&&Z();let i=[...e,{id:Date.now().toString(),text:s,sender:"user"}];t(i),v(""),j(!0);try{let e=await fetch("/api/genkit/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,history:i.slice(0,-1).map(e=>({role:"user"===e.sender?"user":"model",content:[{text:e.text}]}))})});if(!e.ok){let t=await e.json();throw Error(t.error||"The API returned an error.")}let r=await e.json(),n={id:(Date.now()+1).toString(),text:r.reply,sender:"bot"};t(e=>[...e,n])}catch(r){console.error("Error calling chat API:",r);let e={id:(Date.now()+1).toString(),text:`Sorry, the application encountered an error: ${r.message}`,sender:"bot"};t(t=>[...t,e])}finally{j(!1)}},[r,w,k,Z,e]),M=async e=>{e.preventDefault(),A()};return(0,s.jsxs)("div",{className:"p-4 sm:p-6 flex flex-col h-full items-center",children:[(0,s.jsxs)("header",{className:"text-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Simple Chat"}),s.jsx("p",{className:"text-muted-foreground",children:"A clean-slate chat for debugging."})]}),(0,s.jsxs)(p.Zb,{className:"w-full max-w-2xl flex-1 flex flex-col",children:[(0,s.jsxs)(p.Ol,{children:[s.jsx(p.ll,{children:"Test Chat Interface"}),s.jsx(p.SZ,{children:"Send a message to test the underlying AI connection."})]}),s.jsx(p.aY,{className:"flex-1 overflow-hidden",children:s.jsx(h.ScrollArea,{className:"h-full pr-4",ref:b,children:(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,s.jsxs)("div",{className:(0,m.cn)("flex items-start gap-3","user"===e.sender?"justify-end":"justify-start"),children:["bot"===e.sender&&s.jsx(f.qE,{className:"h-8 w-8",children:s.jsx(f.Q5,{children:s.jsx(o.Z,{})})}),s.jsx("div",{className:(0,m.cn)("max-w-xs md:max-w-md lg:max-w-lg rounded-lg px-4 py-2 text-sm","user"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:e.text}),"user"===e.sender&&s.jsx(f.qE,{className:"h-8 w-8",children:s.jsx(f.Q5,{children:s.jsx(c.Z,{})})})]},e.id)),w&&(0,s.jsxs)("div",{className:"flex items-start gap-3 justify-start",children:[s.jsx(f.qE,{className:"h-8 w-8",children:s.jsx(f.Q5,{children:s.jsx(o.Z,{})})}),s.jsx("div",{className:"bg-muted rounded-lg px-4 py-2 text-sm flex items-center",children:s.jsx(a.Z,{className:"h-4 w-4 animate-spin"})})]})]})})}),s.jsx(p.eW,{children:(0,s.jsxs)("form",{onSubmit:M,className:"flex w-full items-center space-x-2",children:[(0,s.jsxs)(d.z,{type:"button",variant:"ghost",size:"icon",className:(0,m.cn)("flex-shrink-0",k&&"text-destructive"),onClick:()=>{k?Z():(N.current=r.trim(),P())},disabled:!1===C||w||"activating"===S,title:(e=>{if(!1===C)return"Voice input not supported";switch(e){case"listening":return"Stop dictation";case"activating":return"Activating...";default:return"Start dictation"}})(S),children:[(e=>{switch(e){case"listening":return s.jsx(n.Z,{className:"h-5 w-5"});case"activating":return s.jsx(a.Z,{className:"h-5 w-5 animate-spin"});default:return s.jsx(l.Z,{className:"h-5 w-5"})}})(S),s.jsx("span",{className:"sr-only",children:"Use Voice"})]}),s.jsx(x.I,{placeholder:"Send a message...",value:r,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},disabled:w,autoComplete:"off"}),(0,s.jsxs)(d.z,{type:"submit",size:"icon",disabled:w||!r.trim(),children:[s.jsx(u.Z,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Send Message"})]})]})})]})]})}},3236:(e,t,r)=>{"use strict";r.d(t,{ScrollArea:()=>l});var s=r(10326),i=r(17577),n=r(16999),a=r(51223);let l=i.forwardRef(({className:e,children:t,...r},i)=>(0,s.jsxs)(n.fC,{ref:i,className:(0,a.cn)("relative overflow-hidden",e),...r,children:[s.jsx(n.l_,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(o,{}),s.jsx(n.Ns,{})]}));l.displayName=n.fC.displayName;let o=i.forwardRef(({className:e,orientation:t="vertical",...r},i)=>s.jsx(n.gb,{ref:i,orientation:t,className:(0,a.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=n.gb.displayName},34692:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var s=r(17577);function i({onTranscript:e}){let[t,r]=(0,s.useState)("idle"),[i,n]=(0,s.useState)(void 0),a=(0,s.useRef)(null),l=(0,s.useRef)(null),o=(0,s.useCallback)(()=>{if(!i)return;if(!l.current)try{l.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.error("Web Audio API is not supported in this browser.",e);return}let e=l.current;"suspended"===e.state&&e.resume();let t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(880,e.currentTime),r.gain.setValueAtTime(.1,e.currentTime),t.start(e.currentTime),t.stop(e.currentTime+.1)},[i]),c=(0,s.useCallback)(()=>{if("idle"!==t||!i)return;r("activating");let s=new(window.SpeechRecognition||window.webkitSpeechRecognition);a.current=s,s.lang="en-US",s.interimResults=!0,s.continuous=!0,s.onstart=()=>{o(),r("listening")},s.onend=()=>{r("idle"),a.current=null},s.onerror=e=>{"no-speech"===e.error||console.error("Speech recognition error:",e.error),r("idle")},s.onresult=t=>{let r=Array.from(t.results).map(e=>e[0]).map(e=>e.transcript).join("");(r=r.replace(/ comma/gi,",").replace(/ period/gi,".")).length>0&&(r=r.charAt(0).toUpperCase()+r.slice(1)),e(r)},s.start()},[t,i,e,o]),u=(0,s.useCallback)(()=>{a.current&&("listening"===t||"activating"===t)&&a.current.stop()},[t]);return{isListening:"listening"===t,status:t,startListening:c,stopListening:u,isSupported:i}}},74045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(19510),i=r(68570);let n=(0,i.createProxy)(String.raw`/home/user/studio/src/components/simple-chat/simple-chat-view.tsx`),{__esModule:a,$$typeof:l}=n;n.default;let o=(0,i.createProxy)(String.raw`/home/user/studio/src/components/simple-chat/simple-chat-view.tsx#SimpleChatView`);function c(){return s.jsx(o,{})}},37125:(e,t,r)=>{"use strict";function s(e,[t,r]){return Math.min(r,Math.max(t,e))}r.d(t,{u:()=>s})},51016:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},46721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},61896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},42556:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},63144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,7514,6621,2371,7040,6999,8606,5338],()=>r(54923));module.exports=s})();