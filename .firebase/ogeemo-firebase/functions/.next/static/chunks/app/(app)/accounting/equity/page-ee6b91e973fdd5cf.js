(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6112],{16326:function(e,t,a){Promise.resolve().then(a.bind(a,10912)),Promise.resolve().then(a.bind(a,61481)),Promise.resolve().then(a.bind(a,99505))},99505:function(e,t,a){"use strict";a.r(t),a.d(t,{EquityView:function(){return k}});var s=a(57437),n=a(2265),l=a(47304),r=a(48185),i=a(89733),c=a(91241),d=a(8527),o=a(19847),u=a(3409),x=a(1104),m=a(90809),f=a(38087),h=a(80822),j=a(21121),p=a(86763),g=a(31590),N=a(29943),b=a(54662),y=a(77209),w=a(70402),v=a(19779),C=a(76598);let Z={date:"",description:"",amount:""};function k(){let[e,t]=(0,n.useState)([]),[a,k]=(0,n.useState)(!0),{user:D}=(0,v.a)(),[R,S]=(0,n.useState)(!1),[A,T]=(0,n.useState)(null),[z,F]=(0,n.useState)(null),[_,E]=(0,n.useState)("contribution"),[O,V]=(0,n.useState)(Z),{toast:q}=(0,p.pm)();(0,n.useEffect)(()=>{if(!D){k(!1);return}(async()=>{k(!0);try{let e=await (0,C.aL)(D.uid);t(e)}catch(e){q({variant:"destructive",title:"Failed to load equity data",description:e.message})}finally{k(!1)}})()},[D,q]);let{contributions:H,draws:I,totalContributions:Y,totalDraws:$,netEquity:L}=(0,n.useMemo)(()=>{let t=e.filter(e=>"contribution"===e.type).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),a=e.filter(e=>"draw"===e.type).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),s=t.reduce((e,t)=>e+t.amount,0),n=a.reduce((e,t)=>e+t.amount,0);return{contributions:t,draws:a,totalContributions:s,totalDraws:n,netEquity:s-n}},[e]),M=(e,t)=>{E(e),t?(T(t),V({date:t.date,description:t.description,amount:String(t.amount)})):(T(null),V(Z)),S(!0)},G=async()=>{if(!D)return;let e=parseFloat(O.amount);if(!O.date||isNaN(e)||e<=0){q({variant:"destructive",title:"Invalid Input",description:"Please provide a valid date and a positive amount."});return}let a={date:O.date,description:O.description,amount:e,type:_};try{if(A)await (0,C.gG)(A.id,a),t(e=>e.map(e=>e.id===A.id?{...e,...a}:e)),q({title:"Transaction Updated"});else{let e=await (0,C.kZ)({...a,userId:D.uid});t(t=>[...t,e]),q({title:"Transaction Added"})}S(!1)}catch(e){q({variant:"destructive",title:"Save Failed",description:e.message})}},P=async()=>{if(z)try{await (0,C.R4)(z.id),t(e=>e.filter(e=>e.id!==z.id)),q({title:"Transaction Deleted",variant:"destructive"})}catch(e){q({variant:"destructive",title:"Delete Failed",description:e.message})}finally{F(null)}},U=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),B=(e,t)=>(0,s.jsxs)(l.iA,{children:[(0,s.jsx)(l.xD,{children:(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.ss,{children:"Date"}),(0,s.jsx)(l.ss,{children:"Description"}),(0,s.jsx)(l.ss,{className:"text-right",children:"Amount"}),(0,s.jsx)(l.ss,{className:"w-10",children:(0,s.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,s.jsx)(l.RM,{children:e.length>0?e.map(e=>(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.pj,{children:e.date}),(0,s.jsx)(l.pj,{children:e.description}),(0,s.jsx)(l.pj,{className:"text-right font-mono",children:U(e.amount)}),(0,s.jsx)(l.pj,{children:(0,s.jsxs)(g.h_,{children:[(0,s.jsx)(g.$F,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(g.AW,{align:"end",children:[(0,s.jsxs)(g.Xi,{onSelect:()=>M(t,e),children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,s.jsxs)(g.Xi,{className:"text-destructive",onSelect:()=>F(e),children:[(0,s.jsx)(o.Z,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id)):(0,s.jsx)(l.SC,{children:(0,s.jsxs)(l.pj,{colSpan:4,className:"h-24 text-center",children:["No ","contribution"===t?"contributions":"draws"," recorded yet."]})})}),(0,s.jsx)(l.yt,{children:(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.pj,{colSpan:2,className:"font-bold",children:"Total"}),(0,s.jsx)(l.pj,{className:"text-right font-bold font-mono",children:U("contribution"===t?Y:$)}),(0,s.jsx)(l.pj,{})]})})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[(0,s.jsx)(j.AccountingPageHeader,{pageTitle:"Equity Account"}),(0,s.jsxs)("header",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline text-primary",children:"Equity Account"}),(0,s.jsx)("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Manage owner's contributions, draws, and retained earnings."})]}),(0,s.jsxs)(r.Zb,{className:"max-w-4xl mx-auto",children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Equity Summary"})}),(0,s.jsxs)(r.aY,{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)(r.Zb,{className:"p-4",children:[(0,s.jsxs)(r.ll,{className:"text-lg flex items-center justify-center gap-2",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-green-500"})," Total Contributions"]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-500 mt-2",children:U(Y)})]}),(0,s.jsxs)(r.Zb,{className:"p-4",children:[(0,s.jsxs)(r.ll,{className:"text-lg flex items-center justify-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 text-red-500"})," Total Draws"]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-500 mt-2",children:U($)})]}),(0,s.jsxs)(r.Zb,{className:"p-4 bg-primary/10",children:[(0,s.jsxs)(r.ll,{className:"text-lg flex items-center justify-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-primary"})," Net Owner's Equity"]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-primary mt-2",children:U(L)})]})]})]}),a?(0,s.jsx)("div",{className:"flex h-48 items-center justify-center",children:(0,s.jsx)(f.Z,{className:"h-8 w-8 animate-spin"})}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-7xl mx-auto",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(r.ll,{children:"Owner Contributions"}),(0,s.jsx)(r.SZ,{children:"Money you've put into the business."})]}),(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>M("contribution"),children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Add Contribution"]})]}),(0,s.jsx)(r.aY,{children:B(H,"contribution")})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(r.ll,{children:"Owner Draws"}),(0,s.jsx)(r.SZ,{children:"Money you've taken out for personal use."})]}),(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>M("draw"),children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Add Draw"]})]}),(0,s.jsx)(r.aY,{children:B(I,"draw")})]})]})]}),(0,s.jsx)(b.Vq,{open:R,onOpenChange:S,children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsx)(b.fK,{children:(0,s.jsxs)(b.$N,{children:[A?"Edit":"Add"," ","contribution"===_?"Contribution":"Draw"]})}),(0,s.jsxs)("div",{className:"py-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.Label,{htmlFor:"date",children:"Date"}),(0,s.jsx)(y.I,{id:"date",type:"date",value:O.date,onChange:e=>V(t=>({...t,date:e.target.value}))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(y.I,{id:"description",value:O.description,onChange:e=>V(t=>({...t,description:e.target.value}))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.Label,{htmlFor:"amount",children:"Amount"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground",children:"$"}),(0,s.jsx)(y.I,{id:"amount",type:"number",placeholder:"0.00",value:O.amount,onChange:e=>V(t=>({...t,amount:e.target.value})),className:"pl-7"})]})]})]}),(0,s.jsxs)(b.cN,{children:[(0,s.jsx)(i.z,{variant:"ghost",onClick:()=>S(!1),children:"Cancel"}),(0,s.jsx)(i.z,{onClick:G,children:"Save"})]})]})}),(0,s.jsx)(N.aR,{open:!!z,onOpenChange:()=>F(null),children:(0,s.jsxs)(N._T,{children:[(0,s.jsxs)(N.fY,{children:[(0,s.jsx)(N.f$,{children:"Are you sure?"}),(0,s.jsx)(N.yT,{children:"This will permanently delete this transaction."})]}),(0,s.jsxs)(N.xo,{children:[(0,s.jsx)(N.le,{children:"Cancel"}),(0,s.jsx)(N.OL,{onClick:P,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}},21121:function(e,t,a){"use strict";a.d(t,{AccountingPageHeader:function(){return w}});var s=a(57437),n=a(87138),l=a(89733),r=a(31590),i=a(20594),c=a(98630),d=a(3409),o=a(1104),u=a(61990),x=a(29520),m=a(9480),f=a(67755),h=a(99266),j=a(80032),p=a(921),g=a(90186),N=a(74732),b=a(68358);let y=[{href:"/accounting/invoices/payments",icon:i.Z,label:"Accounts Receivable"},{href:"/accounting/invoices/create",icon:c.Z,label:"Invoice Generator"},{href:"/accounting/transactions/income",icon:d.Z,label:"Manage Income"},{href:"/accounting/transactions/expenses",icon:o.Z,label:"Manage Expenses"},{href:"/accounting/ledgers",icon:u.Z,label:"General Ledger"},{href:"/accounting/accounts-payable",icon:x.Z,label:"Accounts Payable"},{href:"/accounting/bank-statements",icon:m.Z,label:"Bank Statements"},{href:"/accounting/reports",icon:f.Z,label:"Reporting Hub"},{href:"/accounting/vitals",icon:h.Z,label:"Financial Vitals"},{href:"/accounting/onboarding",icon:j.Z,label:"Client Onboarding"},{href:"/accounting/bks-info",icon:p.Z,label:"BKS Info"}];function w(e){let{pageTitle:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(b.aG,{children:(0,s.jsxs)(b.Jb,{children:[(0,s.jsx)(b.gN,{children:(0,s.jsx)(b.At,{asChild:!0,children:(0,s.jsx)(n.default,{href:"/accounting",children:"Accounting Hub"})})}),(0,s.jsx)(b.bg,{}),(0,s.jsx)(b.gN,{children:(0,s.jsx)(b.AG,{children:t})})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(r.h_,{children:[(0,s.jsx)(r.$F,{asChild:!0,children:(0,s.jsxs)(l.z,{variant:"outline",children:["Quick Navigation ",(0,s.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsx)(r.AW,{align:"end",children:y.map(e=>(0,s.jsx)(r.Xi,{asChild:!0,children:(0,s.jsxs)(n.default,{href:e.href,children:[(0,s.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]})},e.href))})]}),(0,s.jsx)(l.z,{asChild:!0,variant:"ghost",size:"icon",className:"rounded-full",children:(0,s.jsx)(n.default,{href:"/accounting","aria-label":"Return to Accounting Hub",children:(0,s.jsx)(N.Z,{className:"h-5 w-5"})})})]})]})}},29943:function(e,t,a){"use strict";a.d(t,{OL:function(){return j},_T:function(){return u},aR:function(){return c},f$:function(){return f},fY:function(){return x},le:function(){return p},xo:function(){return m},yT:function(){return h}});var s=a(57437),n=a(2265),l=a(76669),r=a(49354),i=a(89733);let c=l.fC;l.xz;let d=l.h_,o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});o.displayName=l.aV.displayName;let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{}),(0,s.jsx)(l.VY,{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n})]})});u.displayName=l.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="AlertDialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="AlertDialogFooter";let f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold",a),...n})});f.displayName=l.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});h.displayName=l.dk.displayName;let j=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.aU,{ref:t,className:(0,r.cn)((0,i.d)(),a),...n})});j.displayName=l.aU.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.$j,{ref:t,className:(0,r.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...n})});p.displayName=l.$j.displayName},54662:function(e,t,a){"use strict";a.d(t,{$N:function(){return j},Be:function(){return p},GG:function(){return u},Vq:function(){return c},cN:function(){return h},cZ:function(){return m},fK:function(){return f},hg:function(){return d}});var s=a(57437),n=a(2265),l=a(13304),r=a(74732),i=a(49354);let c=l.fC,d=l.xz,o=l.h_,u=l.x8,x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});x.displayName=l.aV.displayName;let m=n.forwardRef((e,t)=>{let{className:a,children:n,...c}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[n,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5",t),...a})};f.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let j=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});j.displayName=l.Dx.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=l.dk.displayName},47304:function(e,t,a){"use strict";a.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return r},pj:function(){return x},ss:function(){return u},xD:function(){return i},yt:function(){return d}});var s=a(57437),n=a(2265),l=a(49354);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...n})})});r.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...n})});i.displayName="TableHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...n})});c.displayName="TableBody";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...n})});d.displayName="TableFooter";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n})});o.displayName="TableRow";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...n})});u.displayName="TableHead";let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});x.displayName="TableCell",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...n})}).displayName="TableCaption"}},function(e){e.O(0,[4358,4728,2641,231,7255,4086,5510,9279,3070,6680,6669,5578,7322,2971,7023,1744],function(){return e(e.s=16326)}),_N_E=e.O()}]);